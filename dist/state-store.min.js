!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("store",[],e):"object"==typeof exports?exports.store=e():t.store=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function r(t,e){if(void 0===t&&(t=f.uniqueId("scope")),void 0===e&&(e=null),t in h)throw new Error("Scope name must unique");var n=new p(t,e);return h[t]=n,n}function o(t,e){if(t in e)throw new Error("Scope name must unique");var n=e.map(function(t){return"string"==typeof t?i(t):t}).filter(function(t,e,n){return t&&n.indexOf(t)===e});if(n.length<2)throw new Error("Compose scopes length must be greater than one");var r=new l(t,n);return e[t]=r,r}function i(t){if(!h[t])throw new Error("Scope with name "+t+" not present");return h[t]}function u(){var t={};return Object.getOwnPropertyNames(h).forEach(function(e){t[e]=h[e].getState()}),t}var c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),f=n(2),a=n(3),p=function(){function t(t,e){this.name=t,this.state=e,this.isFrozen=!1,this.actions={},this.listeners={}}return t.prototype.registerAction=function(t,e){if(this.isFrozen)throw new Error("This scope is locked you can't add new action.");if(t in this.actions)throw new Error("Action name is duplicate in scope "+this.name);this.actions[t]=e},t.prototype.dispatch=function(t,e){var n=this,r=this.actions[t];if(!r)throw new Error("This action not exists "+t);e&&"object"==typeof e&&s.deepFreeze(e);var o=this.state;return new Promise(function(t,n){r(o,e,t,n)}).then(function(r){return s.deepFreeze(r),Object.getOwnPropertyNames(n.listeners).forEach(function(i){return n.listeners[i]({oldState:o,newState:r,actionName:t,props:e})}),n.state=r,r})},t.prototype.subscribe=function(t,e){if(e&&!(e in this.actions))throw new Error("Action ("+e+") not present in scope.");var n=f.uniqueId("listener");return this.listeners[n]=function(n){e&&e!==n.actionName||t(n)},n},t.prototype.synchronize=function(t,e,n){return t[e]=this.getState(),this.subscribe(function(n){var r=n.newState;t[e]=r},n)},t.prototype.unsubscribe=function(t){return delete this.listeners[t]},t.prototype.lock=function(){this.isFrozen=!0},t.prototype.isLocked=function(){return this.isFrozen},t.prototype.getState=function(){return this.state},t.prototype.getSupportActions=function(){return Object.getOwnPropertyNames(this.actions)},t}(),l=function(t){function e(e,n){var r=t.call(this,e,{})||this;r.name=e,r.scopes=n;var o=[];return n.forEach(function(t){t.lock(),o=o.concat(t.getSupportActions())}),o=o.filter(function(t,e,n){return n.indexOf(t)===e}),o.forEach(function(t){return r.registerAction(t,function(e,o,i,u){var c=n.filter(function(e){return e.getSupportActions().findIndex(function(e){return e===t})>=0}).map(function(e){return e.dispatch(t,o)});a.syncPromises(c).then(function(){return i(r.getState())}).catch(function(t){return u(t)})})}),r.lock(),r}return c(e,t),e.prototype.getState=function(){var t={};return this.scopes.forEach(function(e){return t[e.name]=e.getState()}),t},e}(p),h={};e.createScope=r,e.composeScope=o,e.getScope=i,e.getState=u,e.ROOT_SCOPE=r("rootScope",{})},function(t,e,n){!function(e,n){t.exports=n()}("undefined"!=typeof self&&self,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}({3:function(t,e,n){"use strict";function r(t){return Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];"object"==typeof n&&null!==n&&r(n)}),Object.freeze(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.deepFreeze=r}})})},function(t,e,n){!function(e,n){t.exports=n()}("undefined"!=typeof self&&self,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([,function(t,e,n){"use strict";function r(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[];n.length<t;)n.push(e.charAt(Math.floor(Math.random()*e.length)));return n}function o(t,e){void 0===t&&(t=""),void 0===e&&(e=!1),i[t]?++i[t]:i[t]=1;var n=t+i[t];return e&&(n=n+"-"+r(8).join("")),n}Object.defineProperty(e,"__esModule",{value:!0});var i={};e.generateSeed=r,e.uniqueId=o}])})},function(t,e,n){!function(e,n){t.exports=n()}("undefined"!=typeof self&&self,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}({4:function(t,e,n){"use strict";function r(t){return new i(t)}function o(t){return Promise.all(t.map(function(t){return Promise.resolve(t)}))}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.action=t,this.cache={}}return t.prototype.get=function(t){if(t in this.cache)return this.cache[t];var e=this.action(t);return this.cache[t]=e,e},t.prototype.has=function(t){return t in this.cache},t.prototype.remove=function(t){var e=this,n=this.has(t);return n&&this.get(t).then(function(){return delete e.cache[t]}),n},t}();e.createSyncCache=r,e.syncPromises=o}})})}])});
//# sourceMappingURL=state-store.min.js.map