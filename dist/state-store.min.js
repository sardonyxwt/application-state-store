!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e,t){if(void 0===e&&(e=u.uniqueId("scope")),void 0===t&&(t=null),c.has(e))throw new Error("Scope name must unique");var n=new s(e,t);return c.set(e,n),n}function o(e){return Array.from(c.values()).find(function(t){return t.name===e})}function i(){var e={};return c.forEach(function(t){return e[t.name]=t.getState()}),e}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),s=function(){function e(e,t){this.name=e,this.state=t,this.isFrozen=!1,this.actions=new Map,this.listeners=new Map}return e.prototype.registerAction=function(e,t){if(this.isFrozen)throw new Error("This scope is frozen you can't add new action.");if(this.actions.has(e))throw new Error("Action name is duplicate in scope "+this.name);this.actions.set(e,t)},e.prototype.dispatch=function(e,t){var n=this,r=this.actions.get(e);if(!r)throw new Error("This action not exists "+e);var o=this.state;return new Promise(function(e,n){r(o,t,e,n)}).then(function(t){return u.deepFreeze(t),n.listeners.forEach(function(n){return n({oldScope:o,newScope:t,actionName:e})}),n.state=t,t})},e.prototype.subscribe=function(e){var t=u.uniqueId("listener");return this.listeners.set(t,e),t},e.prototype.unsubscribe=function(e){this.listeners.delete(e)},e.prototype.freeze=function(){this.isFrozen=!0},e.prototype.getState=function(){return this.state},e}();t.Scope=s;var c=new Map;t.createScope=r,t.getScope=o,t.getState=i,t.ROOT_SCOPE=r("rootScope",{})},function(e,t,n){"use strict";function r(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function o(e){return void 0===e&&(e="default"),u[e]?++u[e]:u[e]=0,e+"-"+u[e]+"-"+r(8)}function i(e){return Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];"object"==typeof n&&null!==n&&i(n)}),Object.freeze(e)}Object.defineProperty(t,"__esModule",{value:!0});var u={};t.uniqueId=o,t.deepFreeze=i}])});
//# sourceMappingURL=state-store.min.js.map