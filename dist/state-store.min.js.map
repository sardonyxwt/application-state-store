{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///dist/state-store.min.js","webpack:///webpack/bootstrap 05934c4e6c6b19edb454","webpack:///./src/index.ts","webpack:///./node_modules/@sardonyxwt/utils/object/object.min.js","webpack:///./node_modules/@sardonyxwt/utils/generator/generator.min.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","createScope","initState","middleware","generator_1","uniqueId","scopes","Error","scope","ScopeImpl","forEach","postSetup","storeDevTool","onCreate","composeScope","composeScopes","map","getScope","filter","indexOf","length","ComposeScopeImpl","scopeName","getState","state","getOwnPropertyNames","key","setStoreDevTool","devTool","__extends","extendStatics","setPrototypeOf","__proto__","Array","b","__","constructor","create","__assign","assign","t","arguments","value","object_1","_isFrozen","_actionQueue","_actions","_middleware","_listeners","_state","slice","reverse","registerAction","actionName","action","_this","onChange","actionDispatcher","props","dispatch","deepFreeze","oldState","startNextDeferredAction","shift","deferredAction","Promise","resolve","reject","isFirstAction","appendActionMiddleware","push","then","newState","event","onAction","listener","reason","error","onActionError","subscribe","actionNames","isArray","apply","listenerId","findIndex","synchronize","_a","unsubscribe","id","lock","_super","isLocked","concat","supportActions","currentState","dispatchPromises","it","all","catch","ROOT_SCOPE","e","r","default","3","freeze","charAt","Math","floor","random","u","join","generateSeed"],"mappings":"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","file":"./dist/state-store.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"store\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"store\"] = factory();\n\telse\n\t\troot[\"store\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"store\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"store\"] = factory();\n\telse\n\t\troot[\"store\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar object_1 = __webpack_require__(1);\nvar generator_1 = __webpack_require__(2);\nvar storeDevTool = null;\nvar ScopeImpl = /** @class */ (function () {\n    function ScopeImpl(name, initState, middleware) {\n        this.name = name;\n        this._isFrozen = false;\n        this._actionQueue = [];\n        this._actions = {};\n        this._middleware = [];\n        this._listeners = {};\n        // This code needed to save middleware correct order in dispatch method.\n        this._state = initState;\n        this._middleware = middleware.slice();\n        this._middleware.reverse();\n    }\n    Object.defineProperty(ScopeImpl.prototype, \"isLocked\", {\n        get: function () {\n            return this._isFrozen;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ScopeImpl.prototype, \"state\", {\n        get: function () {\n            return this._state;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ScopeImpl.prototype, \"supportActions\", {\n        get: function () {\n            return Object.getOwnPropertyNames(this._actions);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ScopeImpl.prototype.registerAction = function (actionName, action) {\n        var _this = this;\n        if (this._isFrozen) {\n            throw new Error(\"This scope is locked you can't add new action.\");\n        }\n        if (actionName in this._actions || actionName in this) {\n            throw new Error(\"Action name \" + actionName + \" is duplicate in scope \" + this.name + \" or is reserved in scope\");\n        }\n        this._actions[actionName] = action;\n        if (storeDevTool) {\n            storeDevTool.onChange(this);\n        }\n        var actionDispatcher = function (props) {\n            return _this.dispatch(actionName, props);\n        };\n        this[actionName] = actionDispatcher;\n        return actionDispatcher;\n    };\n    ScopeImpl.prototype.dispatch = function (actionName, props) {\n        var _this = this;\n        var action = this._actions[actionName];\n        if (!action) {\n            throw new Error(\"This action not exists \" + actionName);\n        }\n        if (props && typeof props === 'object') {\n            object_1.deepFreeze(props);\n        }\n        var oldState;\n        var startNextDeferredAction = function () {\n            _this._actionQueue.shift();\n            if (_this._actionQueue.length > 0) {\n                var deferredAction = _this._actionQueue[0];\n                deferredAction();\n            }\n        };\n        return new Promise(function (resolve, reject) {\n            var isFirstAction = _this._actionQueue.length === 0;\n            var deferredAction = function () {\n                oldState = _this.state;\n                _this._middleware.forEach(function (middleware) { return action = middleware.appendActionMiddleware(action); });\n                action(oldState, props, resolve, reject);\n            };\n            _this._actionQueue.push(deferredAction);\n            if (isFirstAction) {\n                deferredAction();\n            }\n        }).then(function (newState) {\n            object_1.deepFreeze(newState);\n            var event = {\n                oldState: oldState,\n                newState: newState,\n                scopeName: _this.name,\n                actionName: actionName,\n                props: props\n            };\n            _this._state = newState;\n            if (storeDevTool) {\n                storeDevTool.onAction(event);\n                storeDevTool.onChange(_this);\n            }\n            Object.getOwnPropertyNames(_this._listeners).forEach(function (key) {\n                var listener = _this._listeners[key];\n                if (listener)\n                    listener(event);\n            });\n            startNextDeferredAction();\n            return newState;\n        }, function (reason) {\n            var error = {\n                reason: reason,\n                oldState: oldState,\n                scopeName: _this.name,\n                actionName: actionName,\n                props: props\n            };\n            if (storeDevTool) {\n                storeDevTool.onActionError(error);\n            }\n            startNextDeferredAction();\n            throw error;\n        });\n    };\n    ScopeImpl.prototype.subscribe = function (listener, actionName) {\n        var _this = this;\n        var actionNames = [];\n        if (Array.isArray(actionName)) {\n            actionNames.push.apply(actionNames, actionName);\n        }\n        else if (actionName) {\n            actionNames.push(actionName);\n        }\n        actionNames.forEach(function (actionName) {\n            if (!(actionName in _this._actions)) {\n                throw new Error(\"Action (\" + actionName + \") not present in scope.\");\n            }\n        });\n        var listenerId = generator_1.uniqueId('listener');\n        this._listeners[listenerId] = function (event) {\n            if (actionNames.length === 0) {\n                return listener(event);\n            }\n            var isActionPresentInScope = actionNames.findIndex(function (actionName) { return actionName === event.actionName; }) !== -1;\n            if (isActionPresentInScope) {\n                listener(event);\n            }\n        };\n        return listenerId;\n    };\n    ScopeImpl.prototype.synchronize = function (object, key, actionName) {\n        var state = this.state;\n        var listener = null;\n        if (key) {\n            listener = function (newState) {\n                object[key] = newState;\n            };\n        }\n        if (!key && typeof state === \"object\") {\n            listener = function (newState) {\n                Object.getOwnPropertyNames(newState).forEach(function (key) { return object[key] = newState[key]; });\n            };\n        }\n        if (!listener) {\n            throw new Error('If specific key not set, state must be object.');\n        }\n        listener(this.state);\n        return this.subscribe(function (_a) {\n            var newState = _a.newState;\n            return listener(newState);\n        }, actionName);\n    };\n    ScopeImpl.prototype.unsubscribe = function (id) {\n        return delete this._listeners[id];\n    };\n    ScopeImpl.prototype.lock = function () {\n        this._isFrozen = true;\n        if (storeDevTool) {\n            storeDevTool.onChange(this);\n        }\n    };\n    return ScopeImpl;\n}());\nvar ComposeScopeImpl = /** @class */ (function (_super) {\n    __extends(ComposeScopeImpl, _super);\n    function ComposeScopeImpl(name, scopes, middleware) {\n        var _this = _super.call(this, name, {}, middleware) || this;\n        _this.name = name;\n        _this.scopes = scopes;\n        if (_this.isLocked) {\n            throw new Error('You can not use middleware that lock scope to create a composite scope.');\n        }\n        var actionNames = [];\n        scopes.forEach(function (scope) {\n            actionNames = actionNames.concat(scope.supportActions);\n            scope.lock();\n            scope.subscribe(function (_a) {\n                var actionName = _a.actionName, props = _a.props, oldState = _a.oldState;\n                var currentState = _this.state;\n                Object.getOwnPropertyNames(_this._listeners)\n                    .forEach(function (key) {\n                    return _this._listeners[key]({\n                        oldState: __assign({}, currentState, (_a = {}, _a[scope.name] = oldState, _a)),\n                        newState: currentState,\n                        scopeName: scope.name,\n                        actionName: actionName,\n                        props: props\n                    });\n                    var _a;\n                });\n            });\n        });\n        actionNames = actionNames.filter(function (actionName, i, self) { return self.indexOf(actionName) === i; });\n        actionNames.forEach(function (actionName) { return _this.registerAction(actionName, function (state, props, resolve, reject) {\n            var dispatchPromises = scopes.filter(function (scope) { return scope.supportActions.findIndex(function (it) { return it === actionName; }) >= 0; }).map(function (scope) { return scope.dispatch(actionName, props); });\n            Promise.all(dispatchPromises).then(function () { return resolve(_this.state); }).catch(reject);\n        }); });\n        _this.lock();\n        return _this;\n    }\n    Object.defineProperty(ComposeScopeImpl.prototype, \"state\", {\n        get: function () {\n            var state = {};\n            this.scopes.forEach(function (scope) { return state[scope.name] = scope.state; });\n            return state;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ComposeScopeImpl;\n}(ScopeImpl));\nvar scopes = {};\n/**\n * @function createScope\n * @summary Create a new scope and return it.\n * @param {string} name The name of scope.\n * @default Generate unique name.\n * @param {any} initState The initial scope state.\n * @default Empty object.\n * @param {ScopeMiddleware[]} middleware The scope middleware.\n * @description You can use middleware to use aspect programing.\n * @default Empty array.\n * @return {Scope} Scope.\n * @throws {Error} Will throw an error if name of scope not unique.\n */\nfunction createScope(name, initState, middleware) {\n    if (name === void 0) { name = generator_1.uniqueId('scope'); }\n    if (initState === void 0) { initState = null; }\n    if (middleware === void 0) { middleware = []; }\n    if (name in scopes) {\n        throw new Error(\"Scope name must unique\");\n    }\n    var scope = new ScopeImpl(name, initState, middleware);\n    scopes[name] = scope;\n    middleware.forEach(function (middleware) { return middleware.postSetup(scope); });\n    if (storeDevTool) {\n        storeDevTool.onCreate(scope);\n    }\n    return scope;\n}\nexports.createScope = createScope;\n/**\n * @function composeScope\n * @summary Compose a new scope and return it.\n * @description Compose a new scope and return it. All scopes is auto lock.\n * @param {string} name The name of scope\n * @param {(Scope | string)[]} scopes Scopes to compose.\n * @description Length must be greater than one\n * @param {ScopeMiddleware[]} middleware The scope middleware.\n * @description You can use middleware to use aspect programing.\n * @default Empty array.\n * @return {Scope} Compose scope.\n * @throws {Error} Will throw an error if scopes length less fewer than two.\n * @throws {Error} Will throw an error if name of scope not unique.\n */\nfunction composeScope(name, scopes, middleware) {\n    if (middleware === void 0) { middleware = []; }\n    if (name in scopes) {\n        throw new Error(\"Scope name must unique\");\n    }\n    var composeScopes = scopes.map(function (scope) { return typeof scope === \"string\" ? getScope(scope) : scope; }).filter(function (scope, i, self) { return scope && self.indexOf(scope) === i; });\n    var MIN_COMPOSE_SCOPE_COUNT = 2;\n    if (composeScopes.length < MIN_COMPOSE_SCOPE_COUNT) {\n        throw new Error(\"Compose scopes length must be greater than one\");\n    }\n    var scope = new ComposeScopeImpl(name, composeScopes, middleware);\n    scopes[name] = scope;\n    middleware.forEach(function (middleware) { return middleware.postSetup(scope); });\n    if (storeDevTool) {\n        storeDevTool.onCreate(scope);\n    }\n    return scope;\n}\nexports.composeScope = composeScope;\n/**\n * @function getScope\n * @summary Returns scope.\n * @param {string} scopeName Name scope, to get the Scope.\n * @return {Scope} Scope\n * @throws {Error} Will throw an error if scope not present.\n */\nfunction getScope(scopeName) {\n    if (!scopes[scopeName]) {\n        throw new Error(\"Scope with name \" + scopeName + \" not present\");\n    }\n    return scopes[scopeName];\n}\nexports.getScope = getScope;\n/**\n * @function getState\n * @summary Returns all scope states.\n * @return {{string: any}} Scope states\n */\nfunction getState() {\n    var state = {};\n    Object.getOwnPropertyNames(scopes).forEach(function (key) {\n        state[key] = scopes[key].state;\n    });\n    return state;\n}\nexports.getState = getState;\n/**\n * @function setStoreDevTool\n * @summary Set store dev tool.\n * @param {StoreDevTool} devTool Dev tool middleware, to handle store changes.\n */\nfunction setStoreDevTool(devTool) {\n    storeDevTool = devTool;\n}\nexports.setStoreDevTool = setStoreDevTool;\n/**\n * @var ROOT_SCOPE\n * @summary This scope is global\n * @type {Scope}\n */\nexports.ROOT_SCOPE = createScope('rootScope', {});\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(e,t){if(true)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=3)}({3:function(e,t,n){\"use strict\";function r(e){return Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];\"object\"==typeof n&&null!==n&&r(n)}),Object.freeze(e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.deepFreeze=r}})});\n//# sourceMappingURL=object.min.js.map\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(e,t){if(true)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=1)}([,function(e,t,n){\"use strict\";function r(e){for(var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",n=[];n.length<e;)n.push(t.charAt(Math.floor(Math.random()*t.length)));return n}function o(e,t){void 0===e&&(e=\"\"),void 0===t&&(t=!1),u[e]?++u[e]:u[e]=1;var n=e+u[e];return t&&(n=n+\"-\"+r(8).join(\"\")),n}Object.defineProperty(t,\"__esModule\",{value:!0});var u={};t.generateSeed=r,t.uniqueId=o}])});\n//# sourceMappingURL=generator.min.js.map\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// dist/state-store.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 05934c4e6c6b19edb454","import {deepFreeze} from '@sardonyxwt/utils/object';\nimport {uniqueId} from '@sardonyxwt/utils/generator';\n\nexport type ScopeEvent<T = any> = { newState: T, oldState: T, scopeName: string, actionName: string, props };\nexport type ScopeError<T = any> = { reason, oldState: T, scopeName: string, actionName: string, props };\nexport type ScopeListener<T> = (event: ScopeEvent<T>) => void;\nexport type ScopeAction<T, P = any> = (state: T, props: P, resolve: (newState: T) => void, reject: (error) => void) => void;\nexport type ScopeActionDispatcher<T, P = any> = (props: P) => Promise<T>;\n\n/**\n * @interface Scope\n * @summary The whole state of your app is stored in an scopes inside a single store.\n */\nexport interface Scope<T = any> {\n\n  /**\n   * @var name.\n   * @summary Scope name.\n   * @description Name unique for scope.\n   */\n  readonly name: string;\n\n  /**\n   * @var state\n   * @summary Scope state.\n   */\n  readonly state: T;\n\n  /**\n   * @var isLocked\n   * @summary Is locked status.\n   */\n  readonly isLocked: boolean;\n\n  /**\n   * @var supportActions\n   * @summary Returns support actions.\n   */\n  readonly supportActions: string[];\n\n  /**\n   * @function registerAction\n   * @summary Registers a new action in scope.\n   * @param {string} name The action name.\n   * @param {ScopeAction} action The action that changes the state of scope\n   * @throws {Error} Will throw an error if the scope locked or action name exists in scope\n   * when it is called.\n   */\n  registerAction<P>(name: string, action: ScopeAction<T, P>): ScopeActionDispatcher<T, P>;\n\n  /**\n   * @function dispatch\n   * @summary Dispatches an action.\n   * @description Dispatches an action is the only way to trigger a scope change.\n   * @param {string} actionName Triggered action with same name.\n   * @description This action change state of scope and return new state.\n   * You can use resolve to change the state or reject to throw an exception.\n   * @param {any?} props Additional data for the correct operation of the action.\n   * @return {Promise} You can use the promise to get a new state of scope\n   * or catch errors.\n   * @throws {Error} Will throw an error if the actionName not present in scope.\n   */\n  dispatch(actionName: string, props?): Promise<T>;\n\n  /**\n   * @function subscribe\n   * @summary Adds a scope change listener.\n   * @description It will be called any time an action is dispatched.\n   * @param {ScopeListener} listener A callback to be invoked on every dispatch.\n   * @param {string | string[]} actionName Specific action to subscribe.\n   * @return {string} A listener id to remove this change listener later.\n   * @throws {Error} Will throw an error if actionName not present in scope.\n   */\n  subscribe(listener: ScopeListener<T>, actionName?: string | string[]): string;\n\n  /**\n   * @function unsubscribe\n   * @summary Removes a scope change listener.\n   * @param {string} id Id of the listener to delete.\n   * @return {boolean} Status of unsubscribe action.\n   */\n  unsubscribe(id: string): boolean;\n\n  /**\n   * @function synchronize\n   * @summary Adds a scope synchronized listener.\n   * @description Synchronized listener will be called any time an action is dispatched.\n   * @param {object} object Object to synchronized.\n   * @param {string} key Object property key for synchronized.\n   * If not specific use Object.getOwnPropertyNames to synchronize all properties.\n   * @param {string} actionName Specific action to synchronize.\n   * @return {string} A listener id to remove this change listener later.\n   * @throws {Error} Will throw an errors:\n   * - if actionName not present in scope.\n   * - if {key} param not specified and state isn`t object.\n   */\n  synchronize(object: object, key: string, actionName?: string): string;\n\n  /**\n   * @function lock\n   * @summary Prevents the addition of new actions to scope.\n   */\n  lock(): void;\n\n}\n\n/**\n * @interface ScopeMiddleware\n * @summary You can use middleware to use aspect programing.\n */\nexport interface ScopeMiddleware<T = any> {\n\n  /**\n   * @function postSetup\n   * @param {Scope} scope Created scope.\n   * @summary You can use this method to setup custom actions in scope or\n   * subscribe to actions in scope. Lock scope in this point is bad practice.\n   */\n  postSetup(scope: Scope<T>): void;\n\n  /**\n   * @function appendActionMiddleware\n   * @summary This method wraps the action with a new action and returns it.\n   * @param {ScopeAction} action Wrapped action.\n   * @return {ScopeAction} Action that wrapped old action\n   */\n  appendActionMiddleware(action: ScopeAction<T>): ScopeAction<T>;\n\n}\n\n/**\n * @interface StoreDevTool\n * @summary You can use StoreDevTool to handle all action in store.\n */\nexport interface StoreDevTool {\n\n  /**\n   * @function onCreate\n   * @summary Call when created new scope.\n   * @param {Scope} scope Created scope.\n   */\n  onCreate(scope: Scope): void;\n\n  /**\n   * @function onChange\n   * @summary Call when change scope (lock, registerAction, dispatch).\n   * @param {Scope} scope Changed scope.\n   */\n  onChange(scope: Scope): void;\n\n  /**\n   * @function onAction\n   * @summary Call when in any scope dispatch action.\n   * @param {ScopeEvent} event Action event.\n   */\n  onAction(event: ScopeEvent): void;\n\n  /**\n   * @function onActionError\n   * @summary Call when in any scope dispatch action error.\n   * @param {ScopeError} error Action error.\n   */\n  onActionError(error: ScopeError): void;\n\n}\n\nlet storeDevTool: StoreDevTool = null;\n\nclass ScopeImpl<T = any> implements Scope<T> {\n\n  private _state: T;\n  private _isFrozen = false;\n  private _actionQueue: (() => void)[] = [];\n  private _actions: { [key: string]: ScopeAction<T> } = {};\n  private _middleware: ScopeMiddleware<T>[] = [];\n  protected _listeners: { [key: string]: ScopeListener<T> } = {};\n\n  constructor(readonly name: string, initState: T, middleware: ScopeMiddleware<T>[]) {\n    // This code needed to save middleware correct order in dispatch method.\n    this._state = initState;\n    this._middleware = [...middleware];\n    this._middleware.reverse();\n  }\n\n  get isLocked() {\n    return this._isFrozen;\n  }\n\n  get state() {\n    return this._state;\n  }\n\n  get supportActions() {\n    return Object.getOwnPropertyNames(this._actions);\n  }\n\n  registerAction<P>(actionName: string, action: ScopeAction<T, P>) {\n    if (this._isFrozen) {\n      throw new Error(`This scope is locked you can't add new action.`);\n    }\n    if (actionName in this._actions || actionName in this) {\n      throw new Error(`Action name ${actionName} is duplicate in scope ${this.name} or is reserved in scope`);\n    }\n    this._actions[actionName] = action;\n    if (storeDevTool) {\n      storeDevTool.onChange(this);\n    }\n    const actionDispatcher = (props: P) => {\n      return this.dispatch(actionName, props);\n    };\n\n    this[actionName] = actionDispatcher;\n\n    return actionDispatcher;\n  }\n\n  dispatch(actionName: string, props?) {\n    let action: ScopeAction<T> = this._actions[actionName];\n\n    if (!action) {\n      throw new Error(`This action not exists ${actionName}`);\n    }\n\n    if (props && typeof props === 'object') {\n      deepFreeze(props);\n    }\n\n    let oldState;\n\n    const startNextDeferredAction = () => {\n      this._actionQueue.shift();\n      if (this._actionQueue.length > 0) {\n        const deferredAction = this._actionQueue[0];\n        deferredAction();\n      }\n    };\n\n    return new Promise<T>((resolve, reject) => {\n      const isFirstAction = this._actionQueue.length === 0;\n      const deferredAction = () => {\n        oldState = this.state;\n        this._middleware.forEach(\n          middleware => action = middleware.appendActionMiddleware(action)\n        );\n        action(oldState, props, resolve, reject);\n      };\n      this._actionQueue.push(deferredAction);\n      if (isFirstAction) {\n        deferredAction();\n      }\n    }).then(newState => {\n      deepFreeze(newState);\n      const event: ScopeEvent<T> = {\n        oldState,\n        newState,\n        scopeName: this.name,\n        actionName,\n        props\n      };\n      this._state = newState;\n      if (storeDevTool) {\n        storeDevTool.onAction(event);\n        storeDevTool.onChange(this);\n      }\n      Object.getOwnPropertyNames(this._listeners).forEach(key => {\n        const listener = this._listeners[key];\n        if (listener) listener(event);\n      });\n      startNextDeferredAction();\n      return newState;\n    }, reason => {\n      const error: ScopeError<T> = {\n        reason,\n        oldState,\n        scopeName: this.name,\n        actionName,\n        props\n      };\n      if (storeDevTool) {\n        storeDevTool.onActionError(error);\n      }\n      startNextDeferredAction();\n      throw error;\n    });\n  }\n\n  subscribe(listener: ScopeListener<T>, actionName?: string | string[]) {\n    const actionNames: string[] = [];\n\n    if (Array.isArray(actionName)) {\n      actionNames.push(...actionName);\n    } else if (actionName) {\n      actionNames.push(actionName);\n    }\n\n    actionNames.forEach(actionName => {\n      if (!(actionName in this._actions)) {\n        throw new Error(`Action (${actionName}) not present in scope.`);\n      }\n    });\n\n    const listenerId = uniqueId('listener');\n    this._listeners[listenerId] = event => {\n\n      if (actionNames.length === 0) {\n        return listener(event);\n      }\n\n      const isActionPresentInScope = actionNames.findIndex(\n        actionName => actionName === event.actionName\n      ) !== -1;\n\n      if (isActionPresentInScope) {\n        listener(event);\n      }\n    };\n    return listenerId;\n  }\n\n  synchronize(object: object, key?: string, actionName?: string) {\n    const state = this.state;\n\n    let listener: (newState: T) => void = null;\n\n    if (key) {\n      listener = (newState) => {\n        object[key] = newState;\n      };\n    }\n\n    if (!key && typeof state === \"object\") {\n      listener = (newState) => {\n        Object.getOwnPropertyNames(newState).forEach(\n          key => object[key] = newState[key]\n        );\n      };\n    }\n\n    if (!listener) {\n      throw new Error('If specific key not set, state must be object.');\n    }\n\n    listener(this.state);\n\n    return this.subscribe(({newState}) => listener(newState), actionName);\n  }\n\n  unsubscribe(id: string) {\n    return delete this._listeners[id];\n  }\n\n  lock() {\n    this._isFrozen = true;\n    if (storeDevTool) {\n      storeDevTool.onChange(this);\n    }\n  }\n\n}\n\nclass ComposeScopeImpl extends ScopeImpl<{}> {\n\n  constructor(\n    readonly name: string,\n    private scopes: Scope[],\n    middleware: ScopeMiddleware[]\n  ) {\n    super(name, {}, middleware);\n\n    if (this.isLocked) {\n      throw new Error('You can not use middleware that lock scope to create a composite scope.');\n    }\n\n    let actionNames: string[] = [];\n\n    scopes.forEach(scope => {\n      actionNames = [...actionNames, ...scope.supportActions];\n\n      scope.lock();\n      scope.subscribe(({actionName, props, oldState}) => {\n        const currentState = this.state;\n        Object.getOwnPropertyNames(this._listeners)\n          .forEach(key => this._listeners[key]({\n            oldState: {...currentState, [scope.name]: oldState},\n            newState: currentState,\n            scopeName: scope.name,\n            actionName,\n            props\n          }));\n      });\n    });\n\n    actionNames = actionNames.filter(\n      (actionName, i, self) => self.indexOf(actionName) === i\n    );\n\n    actionNames.forEach(actionName => this.registerAction(\n      actionName, (state, props, resolve, reject) => {\n        let dispatchPromises = scopes.filter(\n          scope => scope.supportActions.findIndex(\n            it => it === actionName\n          ) >= 0\n        ).map(scope => scope.dispatch(actionName, props));\n        Promise.all(dispatchPromises).then(\n          () => resolve(this.state)\n        ).catch(reject);\n      }\n    ));\n\n    this.lock();\n  }\n\n  get state(): {} {\n    let state = {};\n\n    this.scopes.forEach(scope => state[scope.name] = scope.state);\n\n    return state;\n  }\n\n}\n\nconst scopes: { [key: string]: Scope<any> } = {};\n\n/**\n * @function createScope\n * @summary Create a new scope and return it.\n * @param {string} name The name of scope.\n * @default Generate unique name.\n * @param {any} initState The initial scope state.\n * @default Empty object.\n * @param {ScopeMiddleware[]} middleware The scope middleware.\n * @description You can use middleware to use aspect programing.\n * @default Empty array.\n * @return {Scope} Scope.\n * @throws {Error} Will throw an error if name of scope not unique.\n */\nexport function createScope<T>(\n  name = uniqueId('scope'),\n  initState: T = null,\n  middleware: ScopeMiddleware<T>[] = []\n): Scope<T> {\n  if (name in scopes) {\n    throw new Error(`Scope name must unique`);\n  }\n  const scope = new ScopeImpl<T>(name, initState, middleware);\n  scopes[name] = scope;\n  middleware.forEach(middleware => middleware.postSetup(scope));\n  if (storeDevTool) {\n    storeDevTool.onCreate(scope);\n  }\n  return scope;\n}\n\n/**\n * @function composeScope\n * @summary Compose a new scope and return it.\n * @description Compose a new scope and return it. All scopes is auto lock.\n * @param {string} name The name of scope\n * @param {(Scope | string)[]} scopes Scopes to compose.\n * @description Length must be greater than one\n * @param {ScopeMiddleware[]} middleware The scope middleware.\n * @description You can use middleware to use aspect programing.\n * @default Empty array.\n * @return {Scope} Compose scope.\n * @throws {Error} Will throw an error if scopes length less fewer than two.\n * @throws {Error} Will throw an error if name of scope not unique.\n */\nexport function composeScope(\n  name: string,\n  scopes: (Scope | string)[],\n  middleware: ScopeMiddleware[] = []\n): Scope {\n  if (name in scopes) {\n    throw new Error(`Scope name must unique`);\n  }\n  let composeScopes = scopes.map(\n    scope => typeof scope === \"string\" ? getScope(scope) : scope\n  ).filter(\n    (scope, i, self) => scope && self.indexOf(scope) === i\n  );\n  const MIN_COMPOSE_SCOPE_COUNT = 2;\n  if (composeScopes.length < MIN_COMPOSE_SCOPE_COUNT) {\n    throw new Error(`Compose scopes length must be greater than one`);\n  }\n  const scope = new ComposeScopeImpl(name, composeScopes, middleware);\n  scopes[name] = scope;\n  middleware.forEach(middleware => middleware.postSetup(scope));\n  if (storeDevTool) {\n    storeDevTool.onCreate(scope);\n  }\n  return scope;\n}\n\n/**\n * @function getScope\n * @summary Returns scope.\n * @param {string} scopeName Name scope, to get the Scope.\n * @return {Scope} Scope\n * @throws {Error} Will throw an error if scope not present.\n */\nexport function getScope(scopeName: string) {\n  if (!scopes[scopeName]) {\n    throw new Error(`Scope with name ${scopeName} not present`);\n  }\n  return scopes[scopeName];\n}\n\n/**\n * @function getState\n * @summary Returns all scope states.\n * @return {{string: any}} Scope states\n */\nexport function getState() {\n  const state = {};\n  Object.getOwnPropertyNames(scopes).forEach(key => {\n    state[key] = scopes[key].state;\n  });\n  return state;\n}\n\n/**\n * @function setStoreDevTool\n * @summary Set store dev tool.\n * @param {StoreDevTool} devTool Dev tool middleware, to handle store changes.\n */\nexport function setStoreDevTool(devTool: StoreDevTool) {\n  storeDevTool = devTool;\n}\n\n/**\n * @var ROOT_SCOPE\n * @summary This scope is global\n * @type {Scope}\n */\nexport const ROOT_SCOPE = createScope('rootScope', {});\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=3)}({3:function(e,t,n){\"use strict\";function r(e){return Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];\"object\"==typeof n&&null!==n&&r(n)}),Object.freeze(e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.deepFreeze=r}})});\n//# sourceMappingURL=object.min.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@sardonyxwt/utils/object/object.min.js\n// module id = 1\n// module chunks = 0","!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=1)}([,function(e,t,n){\"use strict\";function r(e){for(var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",n=[];n.length<e;)n.push(t.charAt(Math.floor(Math.random()*t.length)));return n}function o(e,t){void 0===e&&(e=\"\"),void 0===t&&(t=!1),u[e]?++u[e]:u[e]=1;var n=e+u[e];return t&&(n=n+\"-\"+r(8).join(\"\")),n}Object.defineProperty(t,\"__esModule\",{value:!0});var u={};t.generateSeed=r,t.uniqueId=o}])});\n//# sourceMappingURL=generator.min.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@sardonyxwt/utils/generator/generator.min.js\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}