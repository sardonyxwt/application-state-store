{"version":3,"sources":["webpack://store/webpack/universalModuleDefinition","webpack://store/webpack/bootstrap","webpack://store/./src/index.ts","webpack://store/./node_modules/@sardonyxwt/utils/dist/object.min.js","webpack://store/./node_modules/@sardonyxwt/utils/dist/generator.min.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ScopeMacroType","ScopeChangeEventType","StoreChangeEventType","stores","Map","storeDevTool","onCreateStore","onChangeStore","onCreateScope","onChangeScope","onAction","onActionError","onActionListenerError","RESET_SCOPE_ACTION","RESTORE_SCOPE_ACTION","store","config","_isActionInProgress","_isActionDispatchAvailable","_actions","_listeners","_contextEvents","_listenerIdGenerator","createUniqueIdGenerator","initState","middleware","isImmutabilityEnabled","isSubscribedMacroAutoCreateEnabled","isFrozen","this","_state","_initState","_middleware","reverse","registerAction","_","restoredState","_isFrozen","_context","Array","from","keys","actionName","action","transformer","Error","has","set","actionDispatcher","props","emitEvent","dispatchResult","dispatch","subscriberMacroName","charAt","toUpperCase","slice","registerMacro","state","listener","subscribe","type","REGISTER_ACTION","macroName","macro","macroType","FUNCTION","GETTER","getOwnPropertyDescriptor","SETTER","macroFunc","configurable","REGISTER_MACRO","deepFreeze","forEach","appendActionMiddleware","oldState","buildScopeError","reason","scopeName","onFulfilled","newState","event","storeName","push","childrenEvents","map","contextEvent","parentEvent","dispatchEvent","onRejected","error","e","actionNames","listenerId","length","findIndex","assign","unsubscribe","id","delete","lock","LOCK","reset","restore","_scopes","_statesToRestore","_scopeNameGenerator","scope","createScope","useRestoredStateIfAvailable","useRestoredState","ScopeImpl","postSetup","CREATE_SCOPE","getScope","hasScope","it","states","isStoreExist","StoreImpl","devTool","default","__spreadArrays","arguments","u","f","getOwnPropertyNames","freeze","flatten","isArray","unflatten","split","isNaN","parseInt","stringifyValue","JSON","stringify","resolveValue","filter","clone","getPrototypeOf","cloneArray","cloneArrays","copyArray","copyArrays","apply","resolveArray","arrayFrom","saveToArray","deleteFromArray","splice","generateSalt","Math","floor","random","generateUUID"],"mappings":"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","file":"state-store.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"store\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"store\"] = factory();\n\telse\n\t\troot[\"store\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import {deepFreeze} from '@sardonyxwt/utils/object';\nimport {createUniqueIdGenerator} from '@sardonyxwt/utils/generator';\n\n/**\n * @type ScopeConfig\n * @summary Scope configuration\n * @param {string} name The name of scope.\n * @default Generate unique name.\n * @param {any} initState The initial scope state.\n * @default Empty object.\n * @param {ScopeMiddleware[]} middleware The scope middleware.\n * @description You can use middleware to use aspect programing.\n * @default Empty array.\n * @param {boolean} isSubscribeMacroAutoCreateEnable Is create subscribe macro when register action.\n * @default false.\n * @param {boolean} isImmutabilityEnabled Is use deepFreeze for state and action props.\n * @default false.\n * @param {boolean} isFrozen Is scope frozen.\n * @default false.\n */\nexport type ScopeConfig<T> = {\n    name?: string;\n    initState?: T;\n    middleware?: ScopeMiddleware<T>[];\n    isSubscribedMacroAutoCreateEnabled?: boolean;\n    isImmutabilityEnabled?: boolean;\n    isFrozen?: boolean;\n};\n/**\n * @type StoreConfig\n * @summary Store configuration\n * @param {string} name The name of scope.\n * @param {boolean} isFrozen Is store frozen.\n * @default false.\n */\nexport type StoreConfig = {\n    name: string;\n    isFrozen?: boolean;\n};\nexport type ScopeEvent<T = any> = {\n    newState: T;\n    oldState: T;\n    scopeName: string;\n    storeName: string;\n    actionName: string;\n    props;\n    parentEvent?: ScopeEvent<T>;\n    childrenEvents?: ScopeEvent<T>[];\n};\nexport type ScopeError<T = any> = {\n    reason;\n    oldState: T;\n    scopeName: string;\n    actionName: string;\n    props;\n};\nexport type ScopeListenerUnsubscribeCallback = (() => boolean) & { listenerId: string };\nexport type ScopeListener<T> = (event: ScopeEvent<T>) => void;\nexport type ScopeAction<T, PROPS> = (state: T, props?: PROPS) => T;\nexport type ScopeMacro<T, PROPS, OUT> = (state: T, props?: PROPS) => OUT;\nexport type ScopeActionResultTransformer<T, PROPS, OUT> = (actionResult: T, props: PROPS) => OUT;\nexport type ScopeActionDispatcher<PROPS, OUT> = (props?: PROPS, emitEvent?: boolean) => OUT;\n\nexport enum ScopeMacroType {\n    GETTER = 'GETTER',\n    SETTER = 'SETTER',\n    FUNCTION = 'FUNCTION',\n}\n\n/**\n * @interface Scope\n * @summary The whole state of your app is stored in an scopes.\n */\nexport interface Scope<T = any> {\n\n    /**\n     * @var name.\n     * @summary Scope name.\n     * @description Name unique for scope.\n     */\n    readonly name: string;\n\n    /**\n     * @var state\n     * @summary Scope state.\n     */\n    readonly state: T;\n\n    /**\n     * @var context\n     * @summary Scope action current context.\n     */\n    readonly context: T;\n\n    /**\n     * @var store\n     * @summary Scope parent store.\n     */\n    readonly store: Store;\n\n    /**\n     * @var isLocked\n     * @summary Is locked status.\n     */\n    readonly isLocked: boolean;\n\n    /**\n     * @var isActionDispatchAvailable\n     * @summary Is action dispatch available status.\n     */\n    readonly isActionDispatchAvailable: boolean;\n\n    /**\n     * @var isSubscribedMacroAutoCreateEnabled\n     * @summary Is subscribe macro auto create enabled.\n     */\n    readonly isSubscribedMacroAutoCreateEnabled: boolean;\n\n    /**\n     * @var supportActions\n     * @summary Support actions.\n     */\n    readonly supportActions: string[];\n\n    /**\n     * @function registerAction\n     * @summary Registers a new action in scope.\n     * @param {string} actionName The action name.\n     * @param {ScopeAction} action The action that changes the state of scope.\n     * @param {ScopeActionResultTransformer} transformer The transformer change returned result.\n     * @return {ScopeActionDispatcher} Return action dispatcher.\n     * You can use it to dispatch action without call scope.dispatch.\n     * @throws {Error} Will throw an error if the scope locked or action name exists in scope\n     * when it is called.\n     */\n    registerAction<PROPS, OUT = T>(\n        actionName: string,\n        action: ScopeAction<T, PROPS>,\n        transformer?: ScopeActionResultTransformer<T, PROPS, OUT>\n    ): ScopeActionDispatcher<PROPS, OUT>;\n\n    /**\n     * @function registerMacro\n     * @summary Registers a new macro in scope.\n     * @param {string} macroName The transformer name.\n     * @param {ScopeMacro} macro The transformer used to add getter macros to scope.\n     * @param {ScopeMacroType} macroType Register macro type.\n     * @throws {Error} Will throw an error if the scope locked or macro name exists in scope\n     * when it is called.\n     */\n    registerMacro<PROPS, OUT>(\n        macroName: string,\n        macro: ScopeMacro<T, PROPS, OUT>,\n        macroType?: ScopeMacroType\n    );\n\n    /**\n     * @function dispatch\n     * @summary Dispatches an action.\n     * @description Dispatches an action is the only way to trigger a scope change.\n     * @param {string} actionName Triggered action with same name.\n     * @description This action change state of scope and return new state.\n     * You can use resolve to change the state or reject to throw an exception.\n     * @param {any?} props Additional data for the correct operation of the action.\n     * @param {boolean?} emitEvent You can specify emit event or not.\n     * @return {any extends T} Return new state.\n     * @throws {Error} Will throw an error if the actionName not present in scope\n     * or {isActionDispatchAvailable} is false.\n     */\n    dispatch<PROPS = any>(actionName: string, props?: PROPS, emitEvent?: boolean): T;\n\n    /**\n     * @function subscribe\n     * @summary Adds a scope change listener.\n     * @description It will be called any time an action is dispatched.\n     * @param {ScopeListener} listener A callback to be invoked on every dispatch.\n     * @param {string[]} actionNames Specific actions to subscribe.\n     * @return {ScopeListenerUnsubscribeCallback} A listener unsubscribe callback to remove this change listener later.\n     * @throws {Error} Will throw an error if actionName not present in scope.\n     */\n    subscribe(listener: ScopeListener<T>, actionNames?: string[]): ScopeListenerUnsubscribeCallback;\n\n    /**\n     * @function unsubscribe\n     * @summary Removes a scope change listener.\n     * @param {string} id Id of the listener to delete.\n     * @return {boolean} Status of unsubscribe action.\n     */\n    unsubscribe(id: string): boolean;\n\n    /**\n     * @function lock\n     * @summary Prevents the addition of new actions to scope.\n     */\n    lock(): void;\n\n    /**\n     * @function reset\n     * @summary Reset scope state.\n     * @param {boolean?} emitEvent You can specify emit event or not.\n     * @return {any extends T} Return new state.\n     */\n    reset(emitEvent?: boolean): T;\n\n    /**\n     * @function restore\n     * @summary Restore scope state.\n     * @param {any extends T} restoredState Restored state.\n     * @param {boolean?} emitEvent You can specify emit event or not.\n     * @return {any extends T} Return new state.\n     */\n    restore(restoredState: T, emitEvent?: boolean): T;\n\n}\n\n/**\n * @interface ScopeMiddleware\n * @summary You can use middleware to use aspect programing.\n */\nexport interface ScopeMiddleware<T> {\n\n    /**\n     * @function postSetup\n     * @param {Scope} scope Created scope.\n     * @summary You can use this method to setup custom actions in scope or\n     * subscribe to actions in scope. Lock scope in this point is bad practice.\n     */\n    postSetup(scope: Scope<T>): void;\n\n    /**\n     * @function appendActionMiddleware\n     * @summary This method wraps the action with a new action and returns it.\n     * @param {ScopeAction} action Wrapped action.\n     * @return {ScopeAction} Action that wrapped old action\n     */\n    appendActionMiddleware<PROPS>(action: ScopeAction<T, PROPS>): ScopeAction<T, PROPS>;\n\n}\n\nexport enum ScopeChangeEventType {\n    REGISTER_MACRO = 'REGISTER_MACRO',\n    REGISTER_ACTION = 'REGISTER_ACTION',\n    LOCK = 'LOCK'\n}\n\nexport enum StoreChangeEventType {\n    CREATE_SCOPE = 'CREATE_SCOPE',\n    LOCK = 'LOCK'\n}\n\nexport interface ScopeChangeDetails {\n    type: ScopeChangeEventType;\n    actionName?: string;\n    macroName?: string;\n    macroType?: ScopeMacroType;\n}\n\nexport interface StoreChangeDetails {\n    type: StoreChangeEventType;\n    scopeName?: string;\n}\n\n/**\n * @interface StoreDevTool\n * @summary You can use StoreDevTool to handle all action in store.\n */\nexport interface StoreDevTool {\n\n    /**\n     * @function onCreateStore\n     * @summary Call when created new store.\n     * @param {Store} store Created store.\n     */\n    onCreateStore(store: Store): void;\n\n    /**\n     * @function onChangeStore\n     * @summary Call when change store (lock, createScope).\n     * @param {Scope} store Changed store.\n     * @param {ScopeChangeDetails} details Additional store change details.\n     */\n    onChangeStore(store: Store, details: StoreChangeDetails): void;\n\n    /**\n     * @function onCreateScope\n     * @summary Call when created new scope.\n     * @param {Scope} scope Created scope.\n     */\n    onCreateScope(scope: Scope): void;\n\n    /**\n     * @function onChangeScope\n     * @summary Call when change scope (lock, registerAction, dispatch).\n     * @param {Scope} scope Changed scope.\n     * @param {ScopeChangeDetails} details Additional scope change details.\n     */\n    onChangeScope(scope: Scope, details: ScopeChangeDetails): void;\n\n    /**\n     * @function onAction\n     * @summary Call when in any scope dispatch action.\n     * @param {ScopeEvent} event Action event.\n     */\n    onAction(event: ScopeEvent): void;\n\n    /**\n     * @function onActionError\n     * @summary Call when in any scope dispatch action error.\n     * @param {ScopeError} error Action error.\n     */\n    onActionError(error: ScopeError): void;\n\n    /**\n     * @function onActionListenerError\n     * @summary Call when in any scope listener dispatch error.\n     * @param {ScopeError} error ActionListener error.\n     */\n    onActionListenerError(error: ScopeError): void;\n\n}\n\n/**\n * @interface Store\n * @summary The whole state of your app is stored in an scopes inside a store.\n */\nexport interface Store {\n\n    /**\n     * @var name.\n     * @summary Store name.\n     * @description Name unique for store.\n     */\n    readonly name: string;\n\n    /**\n     * @var isLocked\n     * @summary Is locked status.\n     */\n    readonly isLocked: boolean;\n\n    /**\n     * @var state\n     * @summary Store state.\n     */\n    readonly state: { [scopeName: string]: any };\n\n    /**\n     * @function createScope\n     * @summary Create a new scope and return it.\n     * @param {ScopeConfig} config The config of scope.\n     * @param {boolean} useRestoredStateIfAvailable If true use restore state in store if available.\n     * @return {Scope} Scope.\n     * @throws {Error} Will throw an error if name of scope not unique.\n     */\n    createScope<T = any>(config?: ScopeConfig<T>, useRestoredStateIfAvailable?: boolean): Scope<T>;\n\n    /**\n     * @function getScope\n     * @summary Returns scope.\n     * @param {string} scopeName Name scope, to get the Scope.\n     * @return {Scope} Scope or null\n     */\n    getScope<T = any>(scopeName: string): Scope<T>;\n\n    /**\n     * @function hasScope\n     * @summary Returns a boolean indicating whether an Scope with the specified name exists or not in Store.\n     * @param {string} scopeName Name of scope, to check scope in store.\n     * @return {boolean} Exist status\n     */\n    hasScope(scopeName: string): boolean;\n\n    /**\n     * @function lock\n     * @summary Prevents the creation of new scope to store and lock all included scopes.\n     */\n    lock(): void;\n\n    /**\n     * @function reset\n     * @summary Reset scopes state.\n     * @param {boolean?} emitEvent You can specify emit event or not.\n     */\n    reset(emitEvent?: boolean): void;\n\n    /**\n     * @function restore\n     * @summary Restore scopes state.\n     * @param {Map<string, any>} restoredStates Restored scopes states.\n     * @param {boolean?} emitEvent You can specify emit event or not.\n     */\n    restore(restoredStates: Map<string, any>, emitEvent?: boolean): void;\n\n}\n\nconst stores = new Map<string, Store>();\n\nconst storeDevTool: StoreDevTool = {\n    onCreateStore: () => null,\n    onChangeStore: () => null,\n    onCreateScope: () => null,\n    onChangeScope: () => null,\n    onAction: () => null,\n    onActionError: () => null,\n    onActionListenerError: () => null\n};\n\nexport const RESET_SCOPE_ACTION = '_reset';\nexport const RESTORE_SCOPE_ACTION = '_restore';\n\nclass ScopeImpl<T> implements Scope<T> {\n\n    public readonly store: Store;\n    public readonly name: string;\n    public readonly isImmutabilityEnabled: boolean;\n    public readonly isSubscribedMacroAutoCreateEnabled: boolean;\n\n    private _state: T;\n    private _initState: T;\n    private _context: T;\n    private _isFrozen: boolean;\n    private _isActionInProgress: boolean = false;\n    private _isActionDispatchAvailable: boolean = true;\n\n    private _middleware: ScopeMiddleware<T>[];\n    private _actions = new Map<string, ScopeAction<T, any>>();\n    private _listeners = new Map<string, ScopeListener<T>>();\n    private _contextEvents: ScopeEvent<T>[] = null;\n    private readonly _listenerIdGenerator = createUniqueIdGenerator('ScopeListener');\n\n    constructor(store: Store, config: ScopeConfig<T>) {\n        const {name, initState, middleware, isImmutabilityEnabled, isSubscribedMacroAutoCreateEnabled, isFrozen} = config;\n        this.store = store;\n        this.name = name;\n        this.isImmutabilityEnabled = isImmutabilityEnabled;\n        this.isSubscribedMacroAutoCreateEnabled = isSubscribedMacroAutoCreateEnabled;\n\n        this._state = initState;\n        this._initState = initState;\n        // This code needed to save middleware correct order in dispatch method.\n        this._middleware = [...middleware].reverse();\n\n        this.registerAction(RESET_SCOPE_ACTION, () => this._initState);\n        this.registerAction<T>(RESTORE_SCOPE_ACTION, (_, restoredState) => {\n            this._initState = restoredState;\n            return restoredState;\n        });\n\n        this._isFrozen = isFrozen;\n    }\n\n    get isLocked() {\n        return this._isFrozen;\n    }\n\n    get isActionDispatchAvailable() {\n        return this._isActionDispatchAvailable;\n    }\n\n    get state() {\n        return this._state;\n    }\n\n    get context() {\n        return this._context;\n    }\n\n    get supportActions() {\n        return Array.from(this._actions.keys());\n    }\n\n    registerAction<PROPS, OUT = T>(\n        actionName: string,\n        action: ScopeAction<T, PROPS>,\n        transformer?: ScopeActionResultTransformer<T, PROPS, OUT>\n    ): ScopeActionDispatcher<PROPS, OUT> {\n        if (this._isFrozen) {\n            throw new Error(`This scope is locked you can't add new action.`);\n        }\n        if (this._actions.has(actionName) || (this.isSubscribedMacroAutoCreateEnabled && actionName in this)) {\n            throw new Error(`Action name ${actionName} is duplicate or reserved in scope ${this.name}.`);\n        }\n        this._actions.set(actionName, action);\n\n        const actionDispatcher = (props?: PROPS, emitEvent?: boolean): OUT => {\n            const dispatchResult = this.dispatch<PROPS>(actionName, props, emitEvent);\n            return transformer ? transformer(dispatchResult, props) : dispatchResult as unknown as OUT;\n        };\n\n        if (this.isSubscribedMacroAutoCreateEnabled) {\n            const capitalizeFirstLetterActionName = () => {\n                return actionName.charAt(0).toUpperCase() + actionName.slice(1);\n            };\n\n            const subscriberMacroName = `on${capitalizeFirstLetterActionName()}`;\n\n            this.registerMacro(subscriberMacroName, (state, listener: ScopeListener<T>) => {\n                return this.subscribe(listener, [actionName]);\n            });\n        }\n\n        this[actionName] = actionDispatcher;\n\n        storeDevTool.onChangeScope(this, {type: ScopeChangeEventType.REGISTER_ACTION, actionName});\n\n        return actionDispatcher;\n    }\n\n    registerMacro<IN, OUT>(\n        macroName: string,\n        macro: ScopeMacro<T, IN, OUT>,\n        macroType: ScopeMacroType = ScopeMacroType.FUNCTION\n    ) {\n        if (!macro) {\n            throw new Error(`Macro cannot be null or undefined.`);\n        }\n        if (this._isFrozen) {\n            throw new Error(`This scope is locked you can't add new macro.`);\n        }\n        const isMacroExist = macroName in this;\n        const isPresentMacroHasFunctionType = () => typeof this[macroName] === 'function';\n\n        if (isMacroExist\n            && (isPresentMacroHasFunctionType()\n                || macroType === ScopeMacroType.FUNCTION\n                || (macroType === ScopeMacroType.GETTER && Object.getOwnPropertyDescriptor(this, macroName).get)\n                || (macroType === ScopeMacroType.SETTER && Object.getOwnPropertyDescriptor(this, macroName).set))) {\n            throw new Error(`Macro name ${macroName} is reserved in scope ${this.name}.`);\n        }\n        const macroFunc = (props?: IN) => {\n            return macro(this._state, props);\n        };\n        switch (macroType) {\n            case ScopeMacroType.FUNCTION:\n                this[macroName] = macroFunc;\n                break;\n            case ScopeMacroType.GETTER:\n                Object.defineProperty(this, macroName, {get: macroFunc, configurable: true, enumerable: true});\n                break;\n            case ScopeMacroType.SETTER:\n                Object.defineProperty(this, macroName, {set: macroFunc, configurable: true, enumerable: true});\n                break;\n        }\n\n        storeDevTool.onChangeScope(this, {type: ScopeChangeEventType.REGISTER_MACRO, macroName, macroType});\n    }\n\n    dispatch<PROPS>(actionName: string, props?: PROPS, emitEvent = true): T {\n        let action: ScopeAction<T, any> = this._actions.get(actionName);\n\n        if (!action) {\n            throw new Error(`This action not exists ${actionName}`);\n        }\n\n        if (!this._isActionDispatchAvailable) {\n            throw new Error('Now action dispatch not available. Other action spreads.');\n        }\n\n        if (this.isImmutabilityEnabled && !!props && typeof props === 'object') {\n            deepFreeze(props);\n        }\n\n        this._middleware.forEach(\n            middleware => action = middleware.appendActionMiddleware(action)\n        );\n\n        const oldState = this._isActionInProgress ? this._context : this._state;\n\n        const buildScopeError = (reason) => ({\n            reason,\n            oldState,\n            scopeName: this.name,\n            actionName,\n            props\n        }) as ScopeError<T>;\n\n        const onFulfilled = newState => {\n            if (this.isImmutabilityEnabled && !!newState && typeof props === 'object') {\n                deepFreeze(newState);\n            }\n            const event: ScopeEvent<T> = {\n                oldState,\n                newState,\n                scopeName: this.name,\n                storeName: this.store.name,\n                actionName,\n                props\n            };\n\n            if (this._isActionInProgress) {\n                if (emitEvent) {\n                    this._contextEvents\n                        ? this._contextEvents.push(event)\n                        : this._contextEvents = [event];\n                }\n                this._context = newState;\n                return newState;\n            }\n\n            this._context = null;\n            this._state = newState;\n\n            if (this._contextEvents) {\n                event.childrenEvents = this._contextEvents\n                    .map(contextEvent => ({...contextEvent, parentEvent: event}));\n            }\n\n            this._contextEvents = null;\n            this._isActionDispatchAvailable = false;\n\n            const dispatchEvent = (event: ScopeEvent<T>) => {\n                storeDevTool.onAction(event);\n                this._listeners.forEach(listener => {\n                    try {\n                        if (listener) {\n                            listener(event);\n                        }\n                    } catch (reason) {\n                        storeDevTool.onActionListenerError(buildScopeError(reason));\n                    }\n                });\n            };\n\n            if (emitEvent) {\n                if (event.childrenEvents) {\n                    event.childrenEvents.forEach(dispatchEvent);\n                }\n                dispatchEvent(event);\n            }\n\n            this._isActionDispatchAvailable = true;\n\n            return newState;\n        };\n\n        const onRejected = reason => {\n            const error = buildScopeError(reason);\n            if (!this._isActionInProgress) {\n                storeDevTool.onActionError(error);\n            }\n            return error;\n        };\n\n        if (this._isActionInProgress) {\n            try {\n                return onFulfilled(action(oldState, props));\n            } catch (e) {\n                throw onRejected(e);\n            }\n        }\n\n        try {\n            this._isActionInProgress = true;\n            this._context = oldState;\n            const actionResult = action(oldState, props);\n            return onFulfilled(actionResult);\n        } catch (e) {\n            throw onRejected(e);\n        } finally {\n            this._isActionInProgress = false;\n        }\n    }\n\n    subscribe(listener: ScopeListener<T>, actionNames: string[] = []): ScopeListenerUnsubscribeCallback {\n        actionNames.forEach(actionName => {\n            if (!this._actions.has(actionName)) {\n                throw new Error(`Action (${actionName}) not present in scope.`);\n            }\n        });\n\n        const listenerId = this._listenerIdGenerator();\n\n        const accurateListener = event => {\n            const isActionPresentInScope = actionNames.findIndex(\n                actionName => actionName === event.actionName\n            ) !== -1;\n\n            if (isActionPresentInScope) {\n                listener(event);\n            }\n        };\n\n        this._listeners.set(listenerId, actionNames.length === 0 ? listener : accurateListener);\n\n        return Object.assign(() => this.unsubscribe(listenerId), {listenerId});\n    }\n\n    unsubscribe(id: string) {\n        return this._listeners.delete(id);\n    }\n\n    lock() {\n        this._isFrozen = true;\n\n        storeDevTool.onChangeScope(this, {type: ScopeChangeEventType.LOCK});\n    }\n\n    reset(emitEvent?: boolean): T {\n        return this.dispatch(RESET_SCOPE_ACTION, null, emitEvent);\n    }\n\n    restore(restoredState: T, emitEvent?: boolean): T {\n        return this.dispatch(RESTORE_SCOPE_ACTION, restoredState, emitEvent);\n    }\n\n}\n\nclass StoreImpl implements Store {\n\n    public readonly name: string;\n\n    private readonly _scopes = new Map<string, Scope>();\n    private readonly _statesToRestore = new Map<string, any>();\n    private readonly _scopeNameGenerator = createUniqueIdGenerator('Scope');\n    private _isFrozen: boolean;\n\n    constructor(config: StoreConfig) {\n        this.name = config.name;\n        this._isFrozen = config.isFrozen;\n    }\n\n    get isLocked() {\n        return this._isFrozen;\n    }\n\n    get state() {\n        const state = {};\n\n        this._scopes.forEach(scope => {\n            state[scope.name] = scope.state;\n        });\n\n        return state;\n    }\n\n    createScope<T>(config: ScopeConfig<T> = {}, useRestoredStateIfAvailable?: boolean): Scope<T> {\n        if (this._isFrozen) {\n            throw new Error(`This Store is locked you can't add new scope.`);\n        }\n\n        const {\n            name = this._scopeNameGenerator(),\n            initState = null,\n            middleware = [],\n            isImmutabilityEnabled = false,\n            isSubscribedMacroAutoCreateEnabled = false,\n            isFrozen = false\n        } = config;\n\n        if (this._scopes.has(name)) {\n            throw new Error(`Scope name must unique`);\n        }\n\n        const useRestoredState = useRestoredStateIfAvailable && this._statesToRestore.has(name);\n        const state = useRestoredState\n            ? this._statesToRestore.get(name)\n            : initState;\n        if (useRestoredState) {\n            this._statesToRestore.delete(name);\n        }\n\n        let scope = new ScopeImpl<T>(this, {\n            name,\n            initState: state,\n            middleware: middleware as ScopeMiddleware<T>[],\n            isImmutabilityEnabled,\n            isSubscribedMacroAutoCreateEnabled,\n            isFrozen\n        });\n\n        this._scopes.set(name, scope);\n\n        middleware.forEach(middleware => middleware.postSetup(scope));\n\n        storeDevTool.onCreateScope(scope);\n        storeDevTool.onChangeStore(this, {type: StoreChangeEventType.CREATE_SCOPE, scopeName: name});\n\n        return scope;\n    }\n\n    getScope<T = {}>(scopeName: string): Scope<T> {\n        return this._scopes.get(scopeName);\n    }\n\n    hasScope(scopeName: string): boolean {\n        return this._scopes.has(scopeName);\n    }\n\n    lock() {\n        this._isFrozen = true;\n        this._scopes.forEach(it => it.lock());\n        storeDevTool.onChangeStore(this, {type: StoreChangeEventType.LOCK});\n    }\n\n    reset(emitEvent?: boolean) {\n        this._scopes.forEach(scope => scope.reset(emitEvent));\n    }\n\n    restore(states: Map<string, any>) {\n        states.forEach(\n            (restoredState, scopeName) => {\n                this.hasScope(scopeName)\n                    ? this.getScope(scopeName).restore(restoredState)\n                    : this._statesToRestore.set(scopeName, restoredState);\n            }\n        );\n    }\n\n}\n\n/**\n * @function isStoreExist\n * @summary Check is store exist.\n * @param {string} storeName Name of store.\n * @return {boolean} Status of store exist.\n */\nexport function isStoreExist(storeName: string) {\n    return stores.has(storeName);\n}\n\n/**\n * @function createStore\n * @summary Create a new store and return it.\n * @param {StoreConfig} config Name of store.\n * @return {Store} Store.\n * @throws {Error} Will throw an error if name of store not unique.\n */\nexport function createStore(config: StoreConfig): Store {\n    const {name, isFrozen = false} = config;\n\n    if (isStoreExist(name)) {\n        throw new Error('Store name must unique');\n    }\n\n    const store = new StoreImpl({name, isFrozen});\n    stores.set(name, store);\n    storeDevTool.onCreateStore(store);\n\n    return store;\n}\n\n/**\n * @function getStore\n * @summary Returns store.\n * @param {string} storeName Name scope, to get the Scope.\n * @return {Store} Store or null\n */\nexport function getStore(storeName: string): Store {\n    return stores.get(storeName);\n}\n\n/**\n * @function getState\n * @summary Returns all store states.\n * @return {{string: {[key: string]: any}}} Scope states\n */\nexport function getState() {\n    const state = {};\n\n    stores.forEach(store => {\n        state[store.name] = store.state;\n    });\n\n    return state;\n}\n\n/**\n * @function setStoreDevTool\n * @summary Set store dev tool.\n * @param {StoreDevTool} devTool Dev tool middleware, to handle store changes.\n */\nexport function setStoreDevTool(devTool: Partial<StoreDevTool>) {\n    Object.assign(storeDevTool, devTool);\n}\n","!function(e,r){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=r();else if(\"function\"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)(\"object\"==typeof exports?exports:e)[n]=t[n]}}(window,(function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p=\"\",t(t.s=1)}([,function(e,r,t){\"use strict\";var n=this&&this.__spreadArrays||function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var n=Array(e),o=0;for(r=0;r<t;r++)for(var u=arguments[r],f=0,i=u.length;f<i;f++,o++)n[o]=u[f];return n};Object.defineProperty(r,\"__esModule\",{value:!0}),r.deepFreeze=function e(r){return Object.getOwnPropertyNames(r).forEach((function(t){var n=r[t];\"object\"==typeof n&&null!==n&&e(n)})),Object.freeze(r)},r.flatten=function(e){var r={};return function e(t,n){if(Object(t)!==t)r[n]=t;else if(Array.isArray(t))if(0===t.length)r[n]=[];else for(var o=0;o<t.length;o++)e(t[o],n?n+\".\"+o:\"\"+o);else{var u=Object.getOwnPropertyNames(t);0!==u.length?u.forEach((function(r){return e(t[r],n?n+\".\"+r:r)})):r[n]={}}}(e,\"\"),r},r.unflatten=function(e){if(Object(e)!==e||Array.isArray(e))return e;var r,t,n,o,u={};return Object.getOwnPropertyNames(e).forEach((function(f){r=u,t=\"\",n=f.split(\".\");for(var i=0;i<n.length;i++)o=!isNaN(parseInt(n[i],10)),r=r[t]||(r[t]=o?[]:{}),t=n[i];r[t]=e[f]})),u[\"\"]},r.stringifyValue=function(e){return null==e?\"\":\"number\"==typeof e?\"\"+e:\"object\"==typeof e?JSON.stringify(e):e},r.resolveValue=function(e,r){for(var t=r.split(/[.\\[\\]]/).filter((function(e){return\"\"!==e})),n=e,o=0;o<t.length;o++){if(!n||\"object\"!=typeof n){n=void 0;break}n=n[t[o]]}return n},r.clone=function(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)},r.cloneArray=function(e){return e.map(r.clone)},r.cloneArrays=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[];return e.forEach((function(e){return e.forEach((function(e){return n.push(r.clone(e))}))})),n},r.copyArray=function(e){return n(e)},r.copyArrays=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=[];return e.forEach((function(e){return t.push.apply(t,e)})),t},r.resolveArray=function(e){return Array.isArray(e)?e:[e]},r.arrayFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.copyArrays.apply(void 0,e.map(r.resolveArray))},r.saveToArray=function(e,r,t){void 0===t&&(t=function(e,r){return e===r});var n=e.findIndex((function(e,n,o){return t(e,r,n,o)}));-1!==n?e[n]=r:e.push(r)},r.deleteFromArray=function(e,r){var t=e.findIndex(r);-1!==t&&e.splice(t,1)}}])}));\n//# sourceMappingURL=object.min.js.map","!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)(\"object\"==typeof exports?exports:e)[n]=r[n]}}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.generateSalt=function(e,t){void 0===e&&(e=16),void 0===t&&(t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\");for(var r=\"\";r.length<e;)r+=t.charAt(Math.floor(Math.random()*t.length));return r},t.generateUUID=function(){return t.generateSalt(4)+\"-\"+t.generateSalt(4)+\"-\"+t.generateSalt(4)+\"-\"+t.generateSalt(4)},t.createUniqueIdGenerator=function(e){var r=0,n=e+\":\"+t.generateUUID();return function(){return n+\":\"+ ++r}}}])}));\n//# sourceMappingURL=generator.min.js.map"],"sourceRoot":""}