{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///dist/state-store.min.js","webpack:///webpack/bootstrap 53bf575761247be9e1d9","webpack:///./src/index.ts","webpack:///./node_modules/@sardonyxwt/utils/object/object.min.js","webpack:///./node_modules/@sardonyxwt/utils/generator/generator.min.js"],"names":["root","factory","exports","module","define","amd","a","i","self","this","modules","__webpack_require__","moduleId","installedModules","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","createScope","initState","generator_1","GeneratorUtil","uniqueId","scopes","has","Error","scope","Scope","set","getScope","scopeName","Array","from","values","find","getState","state","forEach","value","object_1","isFrozen","actions","Map","listeners","registerAction","action","dispatch","actionName","props","_this","oldScope","Promise","resolve","reject","then","newScope","ObjectUtil","deepFreeze","it","subscribe","listener","listenerId","unsubscribe","id","delete","freeze","ROOT_SCOPE","e","t","r","default","3","getOwnPropertyNames","generateSeed","length","push","charAt","Math","floor","random","join"],"mappings":"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","file":"./dist/state-store.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar object_1 = __webpack_require__(1);\r\nvar generator_1 = __webpack_require__(2);\r\nvar Scope = /** @class */ (function () {\r\n    function Scope(name, state) {\r\n        this.name = name;\r\n        this.state = state;\r\n        this.isFrozen = false;\r\n        this.actions = new Map();\r\n        this.listeners = new Map();\r\n    }\r\n    /**\r\n     * Registers a new action in scope.\r\n     * @param {string} name The action name.\r\n     * @param {Action} action The action that changes the scope\r\n     * @throws {Error} Will throw an error if the scope frozen or action name exists in scope\r\n     * when it is called.\r\n     */\r\n    Scope.prototype.registerAction = function (name, action) {\r\n        if (this.isFrozen) {\r\n            throw new Error(\"This scope is frozen you can't add new action.\");\r\n        }\r\n        if (this.actions.has(name)) {\r\n            throw new Error(\"Action name is duplicate in scope \" + this.name);\r\n        }\r\n        this.actions.set(name, action);\r\n    };\r\n    /**\r\n     * Dispatches an action. It is the only way to trigger a scope change.\r\n     * @param {string} actionName Triggered action with same name.\r\n     * This action change scope and return new scope.\r\n     * You can use resolve to change the scope or reject to throw an exception.\r\n     * @param {any?} props Additional data for the correct operation of the action.\r\n     * @return {Promise<any>} You can use the promise to get a new state of scope\r\n     * or catch errors.\r\n     * @throws {Error} Will throw an error if the actionName not present in scope.\r\n     */\r\n    Scope.prototype.dispatch = function (actionName, props) {\r\n        var _this = this;\r\n        var action = this.actions.get(actionName);\r\n        if (!action) {\r\n            throw new Error(\"This action not exists \" + actionName);\r\n        }\r\n        var oldScope = this.state;\r\n        return new Promise(function (resolve, reject) {\r\n            action(oldScope, props, resolve, reject);\r\n        }).then(function (newScope) {\r\n            object_1.ObjectUtil.deepFreeze(newScope);\r\n            _this.listeners.forEach(function (it) { return it({ oldScope: oldScope, newScope: newScope, actionName: actionName }); });\r\n            _this.state = newScope;\r\n            return newScope;\r\n        });\r\n    };\r\n    /**\r\n     * Adds a scope change listener.\r\n     * It will be called any time an action is dispatched.\r\n     * @param {Listener} listener A callback to be invoked on every dispatch.\r\n     * By default use ROOT_SCOPE id.\r\n     * @return {string} A listener id to remove this change listener later.\r\n     */\r\n    Scope.prototype.subscribe = function (listener) {\r\n        var listenerId = generator_1.GeneratorUtil.uniqueId('listener');\r\n        this.listeners.set(listenerId, listener);\r\n        return listenerId;\r\n    };\r\n    /**\r\n     * Removes a scope change listener.\r\n     * @param {string} id Id of the listener to delete.\r\n     */\r\n    Scope.prototype.unsubscribe = function (id) {\r\n        this.listeners.delete(id);\r\n    };\r\n    /**\r\n     * Prevents the addition of new actions to scope.\r\n     */\r\n    Scope.prototype.freeze = function () {\r\n        this.isFrozen = true;\r\n    };\r\n    /**\r\n     * Returns scope state.\r\n     * @return {any} Scope state\r\n     */\r\n    Scope.prototype.getState = function () {\r\n        return this.state;\r\n    };\r\n    return Scope;\r\n}());\r\nexports.Scope = Scope;\r\nvar scopes = new Map();\r\n/**\r\n * Create a new scope and return it.\r\n * @param {string} name The name of scope\r\n * By default generate unique name\r\n * @param {any} initState The initial scope state.\r\n * By default use empty object.\r\n * @return {Scope} Scope.\r\n * @throws {Error} Will throw an error if name of scope not unique.\r\n */\r\nfunction createScope(name, initState) {\r\n    if (name === void 0) { name = generator_1.GeneratorUtil.uniqueId('scope'); }\r\n    if (initState === void 0) { initState = null; }\r\n    if (scopes.has(name)) {\r\n        throw new Error(\"Scope name must unique\");\r\n    }\r\n    var scope = new Scope(name, initState);\r\n    scopes.set(name, scope);\r\n    return scope;\r\n}\r\nexports.createScope = createScope;\r\n/**\r\n * Returns scope.\r\n * @param {string} scopeName Name scope, to get the Scope.\r\n * @return {Scope} Scope\r\n */\r\nfunction getScope(scopeName) {\r\n    return Array.from(scopes.values()).find(function (scope) { return scope.name === scopeName; });\r\n}\r\nexports.getScope = getScope;\r\n/**\r\n * Returns all scope states.\r\n * @return {{string: any}} Scope states\r\n */\r\nfunction getState() {\r\n    var state = {};\r\n    scopes.forEach(function (scope) { return state[scope.name] = scope.getState(); });\r\n    return state;\r\n}\r\nexports.getState = getState;\r\n/**\r\n * This scope is global\r\n * @type {Scope}\r\n */\r\nexports.ROOT_SCOPE = createScope('rootScope', {});\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(e,t){if(true)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=3)}({3:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(){}return e.deepFreeze=function(t){return Object.getOwnPropertyNames(t).forEach(function(n){var r=t[n];\"object\"==typeof r&&null!==r&&e.deepFreeze(r)}),Object.freeze(t)},e}();t.ObjectUtil=r}})});\n//# sourceMappingURL=object.min.js.map\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(e,t){if(true)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=1)}([,function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r={},o=function(){function e(){}return e.generateSeed=function(e){for(var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",n=[];n.length<e;)n.push(t.charAt(Math.floor(Math.random()*t.length)));return n},e.uniqueId=function(t,n){void 0===t&&(t=\"\"),void 0===n&&(n=!1),r[t]?++r[t]:r[t]=0;var o=t+r[t];return n&&(o=o+\"-\"+e.generateSeed(8).join(\"\")),o},e}();t.GeneratorUtil=o}])});\n//# sourceMappingURL=generator.min.js.map\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// dist/state-store.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 53bf575761247be9e1d9","import {ObjectUtil} from '@sardonyxwt/utils/object';\nimport {GeneratorUtil} from '@sardonyxwt/utils/generator';\n\nexport type Listener<T> = (event: { newScope: T, oldScope: T, actionName: string }) => void;\nexport type Action<T> = (scope: T, props, resolve: (newScope: T) => void, reject: (error) => void) => void;\n\nexport class Scope<T = any> {\n\n  private isFrozen = false;\n  private actions = new Map<string, Action<T>>();\n  private listeners = new Map<string, Listener<T>>();\n\n  constructor(readonly name: string, private state: T) {\n  }\n\n  /**\n   * Registers a new action in scope.\n   * @param {string} name The action name.\n   * @param {Action} action The action that changes the scope\n   * @throws {Error} Will throw an error if the scope frozen or action name exists in scope\n   * when it is called.\n   */\n  registerAction(name: string, action: Action<T>) {\n    if(this.isFrozen) {\n      throw new Error(`This scope is frozen you can't add new action.`);\n    }\n    if (this.actions.has(name)) {\n      throw new Error(`Action name is duplicate in scope ${this.name}`);\n    }\n    this.actions.set(name, action);\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a scope change.\n   * @param {string} actionName Triggered action with same name.\n   * This action change scope and return new scope.\n   * You can use resolve to change the scope or reject to throw an exception.\n   * @param {any?} props Additional data for the correct operation of the action.\n   * @return {Promise<any>} You can use the promise to get a new state of scope\n   * or catch errors.\n   * @throws {Error} Will throw an error if the actionName not present in scope.\n   */\n  dispatch(actionName: string, props?) {\n    const action: Action<T> = this.actions.get(actionName);\n    if (!action) {\n      throw new Error(`This action not exists ${actionName}`);\n    }\n    const oldScope = this.state;\n    return new Promise<T>((resolve, reject) => {\n      action(oldScope, props, resolve, reject);\n    }).then(newScope => {\n      ObjectUtil.deepFreeze(newScope);\n      this.listeners.forEach(\n        it => it({oldScope, newScope, actionName})\n      );\n      this.state = newScope;\n      return newScope;\n    });\n  }\n\n  /**\n   * Adds a scope change listener.\n   * It will be called any time an action is dispatched.\n   * @param {Listener} listener A callback to be invoked on every dispatch.\n   * By default use ROOT_SCOPE id.\n   * @return {string} A listener id to remove this change listener later.\n   */\n  subscribe(listener: Listener<T>) {\n    const listenerId = GeneratorUtil.uniqueId('listener');\n    this.listeners.set(listenerId, listener);\n    return listenerId;\n  }\n\n  /**\n   * Removes a scope change listener.\n   * @param {string} id Id of the listener to delete.\n   */\n  unsubscribe(id: string) {\n    this.listeners.delete(id);\n  }\n\n  /**\n   * Prevents the addition of new actions to scope.\n   */\n  freeze() {\n    this.isFrozen = true;\n  }\n\n  /**\n   * Returns scope state.\n   * @return {any} Scope state\n   */\n  getState() {\n    return this.state;\n  }\n\n}\n\nconst scopes: Map<string, Scope> = new Map();\n\n/**\n * Create a new scope and return it.\n * @param {string} name The name of scope\n * By default generate unique name\n * @param {any} initState The initial scope state.\n * By default use empty object.\n * @return {Scope} Scope.\n * @throws {Error} Will throw an error if name of scope not unique.\n */\nexport function createScope<T = any>(name = GeneratorUtil.uniqueId('scope'), initState: T = null) {\n  if (scopes.has(name)) {\n    throw new Error(`Scope name must unique`);\n  }\n  const scope = new Scope<T>(name, initState);\n  scopes.set(name, scope);\n  return scope;\n}\n\n/**\n * Returns scope.\n * @param {string} scopeName Name scope, to get the Scope.\n * @return {Scope} Scope\n */\nexport function getScope(scopeName) {\n  return Array.from(scopes.values()).find(\n    scope => scope.name === scopeName\n  );\n}\n\n/**\n * Returns all scope states.\n * @return {{string: any}} Scope states\n */\nexport function getState() {\n  const state = {};\n  scopes.forEach(scope => state[scope.name] = scope.getState());\n  return state;\n}\n\n/**\n * This scope is global\n * @type {Scope}\n */\nexport const ROOT_SCOPE = createScope('rootScope', {});\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=3)}({3:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(){}return e.deepFreeze=function(t){return Object.getOwnPropertyNames(t).forEach(function(n){var r=t[n];\"object\"==typeof r&&null!==r&&e.deepFreeze(r)}),Object.freeze(t)},e}();t.ObjectUtil=r}})});\n//# sourceMappingURL=object.min.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@sardonyxwt/utils/object/object.min.js\n// module id = 1\n// module chunks = 0","!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=1)}([,function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r={},o=function(){function e(){}return e.generateSeed=function(e){for(var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",n=[];n.length<e;)n.push(t.charAt(Math.floor(Math.random()*t.length)));return n},e.uniqueId=function(t,n){void 0===t&&(t=\"\"),void 0===n&&(n=!1),r[t]?++r[t]:r[t]=0;var o=t+r[t];return n&&(o=o+\"-\"+e.generateSeed(8).join(\"\")),o},e}();t.GeneratorUtil=o}])});\n//# sourceMappingURL=generator.min.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@sardonyxwt/utils/generator/generator.min.js\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}