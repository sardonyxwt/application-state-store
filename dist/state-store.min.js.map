{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///dist/state-store.min.js","webpack:///webpack/bootstrap 6afcd049a17f7706d6d4","webpack:///./src/index.ts","webpack:///./node_modules/@sardonyxwt/utils/object/object.min.js","webpack:///./node_modules/@sardonyxwt/utils/generator/generator.min.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","createScope","config","_a","generateScopeName","_b","initState","_c","middleware","_d","isSubscribeMacroAutoCreateEnable","_e","isFrozen","scopes","Error","scope","ScopeImpl","forEach","postSetup","storeDevTool","onCreate","composeScope","composeScopes","map","getScope","filter","indexOf","length","ComposeScopeImpl","scopeName","getState","state","getOwnPropertyNames","key","setStoreDevTool","devTool","assign","__extends","extendStatics","setPrototypeOf","__proto__","Array","b","__","constructor","create","__assign","t","arguments","value","ScopeMacroType","object_1","generator_1","ScopeChangeEventType","createUniqueIdGenerator","generateScopeListenerId","onChange","onAction","onActionError","onActionListenerError","_isActionInProgress","_isActionDispatchAvailable","_actions","_listeners","_name","_state","_middleware","slice","reverse","_isSubscribeMacroAutoCreateEnable","_isFrozen","_context","registerAction","actionName","action","transformer","_this","actionResult","actionDispatcher","props","emitEvent","dispatch","subscriberMacroName","charAt","toUpperCase","registerMacro","listener","subscribe","type","REGISTER_ACTION","macroName","macro","macroType","FUNCTION","isMacroExist","GETTER","getOwnPropertyDescriptor","SETTER","set","macroFunc","REGISTER_MACRO","deepFreeze","appendActionMiddleware","oldState","buildScopeError","reason","onFulfilled","newState","event","_contextEvents","push","childrenEvents","contextEvent","parentEvent","dispatchEvent","onRejected","error","e","actionNames","isArray","apply","listenerId","findIndex","unsubscribe","synchronize","id","lock","LOCK","_super","_scopes","concat","supportActions","currentState","it","r","default","2","freeze","f","u","split","isNaN","parseInt","JSON","stringify","flatten","unflatten","stringifyValue","generateSalt","Math","floor","random","generateUUID"],"mappings":"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","file":"./dist/state-store.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"store\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"store\"] = factory();\n\telse\n\t\troot[\"store\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"store\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"store\"] = factory();\n\telse\n\t\troot[\"store\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar object_1 = __webpack_require__(1);\r\nvar generator_1 = __webpack_require__(2);\r\nvar ScopeMacroType;\r\n(function (ScopeMacroType) {\r\n    ScopeMacroType[\"GETTER\"] = \"GETTER\";\r\n    ScopeMacroType[\"SETTER\"] = \"SETTER\";\r\n    ScopeMacroType[\"FUNCTION\"] = \"FUNCTION\";\r\n})(ScopeMacroType = exports.ScopeMacroType || (exports.ScopeMacroType = {}));\r\nvar ScopeChangeEventType;\r\n(function (ScopeChangeEventType) {\r\n    ScopeChangeEventType[\"REGISTER_MACRO\"] = \"REGISTER_MACRO\";\r\n    ScopeChangeEventType[\"REGISTER_ACTION\"] = \"REGISTER_ACTION\";\r\n    ScopeChangeEventType[\"LOCK\"] = \"LOCK\";\r\n})(ScopeChangeEventType = exports.ScopeChangeEventType || (exports.ScopeChangeEventType = {}));\r\nvar generateScopeName = generator_1.createUniqueIdGenerator('Scope');\r\nvar generateScopeListenerId = generator_1.createUniqueIdGenerator('ScopeListener');\r\nvar storeDevTool = {\r\n    onCreate: function () { return null; },\r\n    onChange: function () { return null; },\r\n    onAction: function () { return null; },\r\n    onActionError: function () { return null; },\r\n    onActionListenerError: function () { return null; }\r\n};\r\nvar ScopeImpl = /** @class */ (function () {\r\n    function ScopeImpl(config) {\r\n        this._isActionInProgress = false;\r\n        this._isActionDispatchAvailable = true;\r\n        this._actions = {};\r\n        this._listeners = {};\r\n        var name = config.name, initState = config.initState, middleware = config.middleware, isSubscribeMacroAutoCreateEnable = config.isSubscribeMacroAutoCreateEnable, isFrozen = config.isFrozen;\r\n        this._name = name;\r\n        this._state = initState;\r\n        // This code needed to save middleware correct order in dispatch method.\r\n        this._middleware = middleware.slice().reverse();\r\n        this._isSubscribeMacroAutoCreateEnable = isSubscribeMacroAutoCreateEnable;\r\n        this._isFrozen = isFrozen;\r\n    }\r\n    Object.defineProperty(ScopeImpl.prototype, \"name\", {\r\n        get: function () {\r\n            return this._name;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ScopeImpl.prototype, \"isLocked\", {\r\n        get: function () {\r\n            return this._isFrozen;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ScopeImpl.prototype, \"isActionDispatchAvailable\", {\r\n        get: function () {\r\n            return this._isActionDispatchAvailable;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ScopeImpl.prototype, \"isSubscribeMacroAutoCreateEnable\", {\r\n        get: function () {\r\n            return this._isSubscribeMacroAutoCreateEnable;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ScopeImpl.prototype, \"state\", {\r\n        get: function () {\r\n            return this._state;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ScopeImpl.prototype, \"context\", {\r\n        get: function () {\r\n            return this._context;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ScopeImpl.prototype, \"supportActions\", {\r\n        get: function () {\r\n            return Object.getOwnPropertyNames(this._actions);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ScopeImpl.prototype.registerAction = function (actionName, action, transformer) {\r\n        var _this = this;\r\n        if (transformer === void 0) { transformer = function (actionResult) { return actionResult; }; }\r\n        if (!transformer) {\r\n            throw new Error(\"Transformer cannot be null or undefined.\");\r\n        }\r\n        if (this._isFrozen) {\r\n            throw new Error(\"This scope is locked you can't add new action.\");\r\n        }\r\n        if (actionName in this._actions || (this._isSubscribeMacroAutoCreateEnable && actionName in this)) {\r\n            throw new Error(\"Action name \" + actionName + \" is duplicate or reserved in scope \" + this._name + \".\");\r\n        }\r\n        this._actions[actionName] = action;\r\n        var actionDispatcher = function (props, emitEvent) {\r\n            return transformer(_this.dispatch(actionName, props, emitEvent), props);\r\n        };\r\n        if (this._isSubscribeMacroAutoCreateEnable) {\r\n            var capitalizeFirstLetterActionName = function () {\r\n                return actionName.charAt(0).toUpperCase() + actionName.slice(1);\r\n            };\r\n            var subscriberMacroName = \"on\" + capitalizeFirstLetterActionName();\r\n            this.registerMacro(subscriberMacroName, function (state, listener) {\r\n                return _this.subscribe(listener, actionName);\r\n            });\r\n        }\r\n        this[actionName] = actionDispatcher;\r\n        storeDevTool.onChange(this, { type: ScopeChangeEventType.REGISTER_ACTION, actionName: actionName });\r\n        return actionDispatcher;\r\n    };\r\n    ScopeImpl.prototype.registerMacro = function (macroName, macro, macroType) {\r\n        var _this = this;\r\n        if (macroType === void 0) { macroType = ScopeMacroType.FUNCTION; }\r\n        if (!macro) {\r\n            throw new Error(\"Macro cannot be null or undefined.\");\r\n        }\r\n        if (this._isFrozen) {\r\n            throw new Error(\"This scope is locked you can't add new macro.\");\r\n        }\r\n        var isMacroExist = macroName in this;\r\n        var isPresentMacroHasFunctionType = function () { return typeof _this[macroName] === 'function'; };\r\n        if (isMacroExist\r\n            && (isPresentMacroHasFunctionType()\r\n                || macroType === ScopeMacroType.FUNCTION\r\n                || (macroType === ScopeMacroType.GETTER && Object.getOwnPropertyDescriptor(this, macroName).get)\r\n                || (macroType === ScopeMacroType.SETTER && Object.getOwnPropertyDescriptor(this, macroName).set))) {\r\n            throw new Error(\"Macro name \" + macroName + \" is reserved in scope \" + this._name + \".\");\r\n        }\r\n        var macroFunc = function (props) {\r\n            return macro(_this._state, props);\r\n        };\r\n        switch (macroType) {\r\n            case ScopeMacroType.FUNCTION:\r\n                this[macroName] = macroFunc;\r\n                break;\r\n            case ScopeMacroType.GETTER:\r\n                Object.defineProperty(this, macroName, { get: macroFunc, configurable: true, enumerable: true });\r\n                break;\r\n            case ScopeMacroType.SETTER:\r\n                Object.defineProperty(this, macroName, { set: macroFunc, configurable: true, enumerable: true });\r\n                break;\r\n        }\r\n        storeDevTool.onChange(this, { type: ScopeChangeEventType.REGISTER_MACRO, macroName: macroName, macroType: macroType });\r\n    };\r\n    ScopeImpl.prototype.dispatch = function (actionName, props, emitEvent) {\r\n        var _this = this;\r\n        if (emitEvent === void 0) { emitEvent = true; }\r\n        var action = this._actions[actionName];\r\n        if (!action) {\r\n            throw new Error(\"This action not exists \" + actionName);\r\n        }\r\n        if (!this._isActionDispatchAvailable) {\r\n            throw new Error(\"Now action dispatch not available. Other action spreads.\");\r\n        }\r\n        if (props && typeof props === 'object') {\r\n            object_1.deepFreeze(props);\r\n        }\r\n        this._middleware.forEach(function (middleware) { return action = middleware.appendActionMiddleware(action); });\r\n        var oldState = this._isActionInProgress ? this._context : this._state;\r\n        var buildScopeError = function (reason) { return ({\r\n            reason: reason,\r\n            oldState: oldState,\r\n            scopeName: _this._name,\r\n            actionName: actionName,\r\n            props: props\r\n        }); };\r\n        var onFulfilled = function (newState) {\r\n            object_1.deepFreeze(newState);\r\n            var event = {\r\n                oldState: oldState,\r\n                newState: newState,\r\n                scopeName: _this._name,\r\n                actionName: actionName,\r\n                props: props\r\n            };\r\n            if (_this._isActionInProgress) {\r\n                if (emitEvent) {\r\n                    _this._contextEvents\r\n                        ? _this._contextEvents.push(event)\r\n                        : _this._contextEvents = [event];\r\n                }\r\n                _this._context = newState;\r\n                return newState;\r\n            }\r\n            _this._context = null;\r\n            _this._state = newState;\r\n            if (_this._contextEvents) {\r\n                event.childrenEvents = _this._contextEvents\r\n                    .map(function (contextEvent) { return (__assign({}, contextEvent, { parentEvent: event })); });\r\n            }\r\n            _this._contextEvents = null;\r\n            _this._isActionDispatchAvailable = false;\r\n            var dispatchEvent = function (event) {\r\n                storeDevTool.onAction(event);\r\n                Object.getOwnPropertyNames(_this._listeners).forEach(function (key) {\r\n                    var listener = _this._listeners[key];\r\n                    try {\r\n                        if (listener)\r\n                            listener(event);\r\n                    }\r\n                    catch (reason) {\r\n                        storeDevTool.onActionListenerError(buildScopeError(reason));\r\n                    }\r\n                });\r\n            };\r\n            if (emitEvent) {\r\n                if (event.childrenEvents) {\r\n                    event.childrenEvents.forEach(dispatchEvent);\r\n                }\r\n                dispatchEvent(event);\r\n            }\r\n            _this._isActionDispatchAvailable = true;\r\n            return newState;\r\n        };\r\n        var onRejected = function (reason) {\r\n            var error = buildScopeError(reason);\r\n            if (!_this._isActionInProgress) {\r\n                storeDevTool.onActionError(error);\r\n            }\r\n            return error;\r\n        };\r\n        if (this._isActionInProgress) {\r\n            try {\r\n                return onFulfilled(action(oldState, props));\r\n            }\r\n            catch (e) {\r\n                throw onRejected(e);\r\n            }\r\n        }\r\n        try {\r\n            this._isActionInProgress = true;\r\n            this._context = oldState;\r\n            var actionResult = action(oldState, props);\r\n            this._isActionInProgress = false;\r\n            return onFulfilled(actionResult);\r\n        }\r\n        catch (e) {\r\n            this._isActionInProgress = false;\r\n            throw onRejected(e);\r\n        }\r\n    };\r\n    ScopeImpl.prototype.subscribe = function (listener, actionName) {\r\n        var _this = this;\r\n        var actionNames = [];\r\n        if (Array.isArray(actionName)) {\r\n            actionNames.push.apply(actionNames, actionName);\r\n        }\r\n        else if (actionName) {\r\n            actionNames.push(actionName);\r\n        }\r\n        actionNames.forEach(function (actionName) {\r\n            if (!(actionName in _this._actions)) {\r\n                throw new Error(\"Action (\" + actionName + \") not present in scope.\");\r\n            }\r\n        });\r\n        var listenerId = generateScopeListenerId();\r\n        this._listeners[listenerId] = function (event) {\r\n            if (actionNames.length === 0) {\r\n                return listener(event);\r\n            }\r\n            var isActionPresentInScope = actionNames.findIndex(function (actionName) { return actionName === event.actionName; }) !== -1;\r\n            if (isActionPresentInScope) {\r\n                listener(event);\r\n            }\r\n        };\r\n        return Object.assign(function () { return _this.unsubscribe(listenerId); }, { listenerId: listenerId });\r\n    };\r\n    ScopeImpl.prototype.synchronize = function (object, key, actionName) {\r\n        var state = this.state;\r\n        var listener = null;\r\n        if (key) {\r\n            listener = function (newState) {\r\n                object[key] = newState;\r\n            };\r\n        }\r\n        if (!key && typeof state === \"object\") {\r\n            listener = function (newState) {\r\n                Object.getOwnPropertyNames(newState).forEach(function (key) { return object[key] = newState[key]; });\r\n            };\r\n        }\r\n        if (!listener) {\r\n            throw new Error('If specific key not set, state must be object.');\r\n        }\r\n        listener(this.state);\r\n        return this.subscribe(function (_a) {\r\n            var newState = _a.newState;\r\n            return listener(newState);\r\n        }, actionName);\r\n    };\r\n    ScopeImpl.prototype.unsubscribe = function (id) {\r\n        return delete this._listeners[id];\r\n    };\r\n    ScopeImpl.prototype.lock = function () {\r\n        this._isFrozen = true;\r\n        storeDevTool.onChange(this, { type: ScopeChangeEventType.LOCK });\r\n    };\r\n    return ScopeImpl;\r\n}());\r\nvar ComposeScopeImpl = /** @class */ (function (_super) {\r\n    __extends(ComposeScopeImpl, _super);\r\n    function ComposeScopeImpl(scopes, config) {\r\n        var _this = _super.call(this, config) || this;\r\n        _this._scopes = scopes;\r\n        var actionNames = [];\r\n        scopes.forEach(function (scope) {\r\n            actionNames = actionNames.concat(scope.supportActions);\r\n            scope.lock();\r\n            scope.subscribe(function (_a) {\r\n                var actionName = _a.actionName, props = _a.props, oldState = _a.oldState;\r\n                var currentState = _this.state;\r\n                Object.getOwnPropertyNames(_this._listeners)\r\n                    .forEach(function (key) {\r\n                    return _this._listeners[key]({\r\n                        oldState: __assign({}, currentState, (_a = {}, _a[scope.name] = oldState, _a)),\r\n                        newState: currentState,\r\n                        scopeName: scope.name,\r\n                        actionName: actionName,\r\n                        props: props\r\n                    });\r\n                    var _a;\r\n                });\r\n            });\r\n        });\r\n        actionNames = actionNames.filter(function (actionName, i, self) { return self.indexOf(actionName) === i; });\r\n        actionNames.forEach(function (actionName) { return _this.registerAction(actionName, function (state, props) {\r\n            scopes.filter(function (scope) { return scope.supportActions.findIndex(function (it) { return it === actionName; }) >= 0; }).map(function (scope) { return scope.dispatch(actionName, props); });\r\n            return _this.state;\r\n        }); });\r\n        _this.lock();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ComposeScopeImpl.prototype, \"state\", {\r\n        get: function () {\r\n            var state = {};\r\n            this._scopes.forEach(function (scope) { return state[scope.name] = scope.state; });\r\n            return state;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ComposeScopeImpl;\r\n}(ScopeImpl));\r\nvar scopes = {};\r\n/**\r\n * @function createScope\r\n * @summary Create a new scope and return it.\r\n * @param {ScopeConfig} config The config of scope.\r\n * @return {Scope} Scope.\r\n * @throws {Error} Will throw an error if name of scope not unique.\r\n */\r\nfunction createScope(config) {\r\n    if (config === void 0) { config = {}; }\r\n    var _a = config.name, name = _a === void 0 ? generateScopeName() : _a, _b = config.initState, initState = _b === void 0 ? null : _b, _c = config.middleware, middleware = _c === void 0 ? [] : _c, _d = config.isSubscribeMacroAutoCreateEnable, isSubscribeMacroAutoCreateEnable = _d === void 0 ? false : _d, _e = config.isFrozen, isFrozen = _e === void 0 ? false : _e;\r\n    if (name in scopes) {\r\n        throw new Error(\"Scope name must unique\");\r\n    }\r\n    var scope = new ScopeImpl({ name: name, initState: initState, middleware: middleware, isSubscribeMacroAutoCreateEnable: isSubscribeMacroAutoCreateEnable, isFrozen: isFrozen });\r\n    scopes[name] = scope;\r\n    middleware.forEach(function (middleware) { return middleware.postSetup(scope); });\r\n    storeDevTool.onCreate(scope);\r\n    return scope;\r\n}\r\nexports.createScope = createScope;\r\n/**\r\n * @function composeScope\r\n * @summary Compose a new scope and return it.\r\n * @description Compose a new scope and return it. All scopes is auto lock.\r\n * @return {Scope} Compose scope.\r\n * @throws {Error} Will throw an error if scopes length less fewer than two.\r\n * @throws {Error} Will throw an error if name of scope not unique.\r\n */\r\nfunction composeScope(scopes, config) {\r\n    if (config === void 0) { config = {}; }\r\n    var _a = config.name, name = _a === void 0 ? generateScopeName() : _a, _b = config.middleware, middleware = _b === void 0 ? [] : _b, _c = config.isSubscribeMacroAutoCreateEnable, isSubscribeMacroAutoCreateEnable = _c === void 0 ? false : _c;\r\n    if (name in scopes) {\r\n        throw new Error(\"Scope name must unique\");\r\n    }\r\n    var composeScopes = scopes.map(function (scope) { return typeof scope === \"string\" ? getScope(scope) : scope; }).filter(function (scope, i, self) { return scope && self.indexOf(scope) === i; });\r\n    var MIN_COMPOSE_SCOPE_COUNT = 2;\r\n    if (composeScopes.length < MIN_COMPOSE_SCOPE_COUNT) {\r\n        throw new Error(\"Compose scopes length must be greater than one\");\r\n    }\r\n    var scope = new ComposeScopeImpl(composeScopes, { name: name, middleware: middleware, isSubscribeMacroAutoCreateEnable: isSubscribeMacroAutoCreateEnable, initState: null, isFrozen: false });\r\n    scopes[name] = scope;\r\n    middleware.forEach(function (middleware) { return middleware.postSetup(scope); });\r\n    storeDevTool.onCreate(scope);\r\n    return scope;\r\n}\r\nexports.composeScope = composeScope;\r\n/**\r\n * @function getScope\r\n * @summary Returns scope.\r\n * @param {string} scopeName Name scope, to get the Scope.\r\n * @return {Scope} Scope\r\n * @throws {Error} Will throw an error if scope not present.\r\n */\r\nfunction getScope(scopeName) {\r\n    if (!scopes[scopeName]) {\r\n        throw new Error(\"Scope with name \" + scopeName + \" not present\");\r\n    }\r\n    return scopes[scopeName];\r\n}\r\nexports.getScope = getScope;\r\n/**\r\n * @function getState\r\n * @summary Returns all scope states.\r\n * @return {{string: any}} Scope states\r\n */\r\nfunction getState() {\r\n    var state = {};\r\n    Object.getOwnPropertyNames(scopes).forEach(function (key) {\r\n        state[key] = scopes[key].state;\r\n    });\r\n    return state;\r\n}\r\nexports.getState = getState;\r\n/**\r\n * @function setStoreDevTool\r\n * @summary Set store dev tool.\r\n * @param {StoreDevTool} devTool Dev tool middleware, to handle store changes.\r\n */\r\nfunction setStoreDevTool(devTool) {\r\n    Object.assign(storeDevTool, devTool);\r\n}\r\nexports.setStoreDevTool = setStoreDevTool;\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(e,t){if(true)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)(\"object\"==typeof exports?exports:e)[n]=r[n]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=2)}({2:function(e,t,r){\"use strict\";function n(e){return Object.getOwnPropertyNames(e).forEach(function(t){var r=e[t];\"object\"==typeof r&&null!==r&&n(r)}),Object.freeze(e)}function o(e){function t(e,n){if(Object(e)!==e)r[n]=e;else if(Array.isArray(e))if(0===e.length)r[n]=[];else for(var o=0;o<e.length;o++)t(e[o],n?n+\".\"+o:\"\"+o);else{var f=Object.getOwnPropertyNames(e);0!==f.length?f.forEach(function(r){return t(e[r],n?n+\".\"+r:r)}):r[n]={}}}var r={};return t(e,\"\"),r}function f(e){if(Object(e)!==e||Array.isArray(e))return e;var t,r,n,o,f={};return Object.getOwnPropertyNames(e).forEach(function(u){t=f,r=\"\",n=u.split(\".\");for(var i=0;i<n.length;i++)o=!isNaN(parseInt(n[i],10)),t=t[r]||(t[r]=o?[]:{}),r=n[i];t[r]=e[u]}),f[\"\"]}function u(e){return void 0===e||null===e?\"\":\"number\"==typeof e?\"\"+e:\"object\"==typeof e?JSON.stringify(e):e}Object.defineProperty(t,\"__esModule\",{value:!0}),t.deepFreeze=n,t.flatten=o,t.unflatten=f,t.stringifyValue=u}})});\n//# sourceMappingURL=object.min.js.map\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(e,t){if(true)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=1)}([,function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.generateSalt=function(e,t){void 0===e&&(e=16),void 0===t&&(t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\");for(var n=\"\";n.length<e;)n+=t.charAt(Math.floor(Math.random()*t.length));return n},t.generateUUID=function(){return t.generateSalt(4)+\"-\"+t.generateSalt(4)+\"-\"+t.generateSalt(4)+\"-\"+t.generateSalt(4)},t.createUniqueIdGenerator=function(e){var n=0,r=t.generateUUID(),o=e+\":\"+r;return function(){return o+\":\"+ ++n}}}])});\n//# sourceMappingURL=generator.min.js.map\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// dist/state-store.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6afcd049a17f7706d6d4","import {deepFreeze} from '@sardonyxwt/utils/object';\nimport {createUniqueIdGenerator} from '@sardonyxwt/utils/generator';\n\n/**\n * @type ScopeConfig\n * @summary Scope configuration\n * @param {string} name The name of scope.\n * @default Generate unique name.\n * @param {any} initState The initial scope state.\n * @default Empty object.\n * @param {ScopeMiddleware[]} middleware The scope middleware.\n * @description You can use middleware to use aspect programing.\n * @default Empty array.\n * @param {boolean} isSubscribeMacroAutoCreateEnable Is create subscribe macro when register action.\n * @default false.\n * @param {boolean} isFrozen Is scope frozen.\n * @default false.\n */\nexport type ScopeConfig<T> = {\n  name?,\n  initState?: T,\n  middleware?: ScopeMiddleware<T>[],\n  isSubscribeMacroAutoCreateEnable?: boolean,\n  isFrozen?: boolean\n};\nexport type ScopeEvent<T = any> = {\n  newState: T,\n  oldState: T,\n  scopeName: string,\n  actionName: string,\n  props,\n  parentEvent?: ScopeEvent<T>,\n  childrenEvents?: ScopeEvent<T>[]\n};\nexport type ScopeError<T = any> = {\n  reason,\n  oldState: T,\n  scopeName: string,\n  actionName: string,\n  props\n};\nexport type ScopeListenerUnsubscribeCallback = (() => boolean) & {listenerId: string};\nexport type ScopeListener<T> = (event: ScopeEvent<T>) => void;\nexport type ScopeAction<T, PROPS> = (state: T, props?: PROPS) => T;\nexport type ScopeMacro<T, PROPS, OUT> = (state: T, props?: PROPS) => OUT;\nexport type ScopeActionResultTransformer<T, PROPS, TRANSFORMED_OUT> = (actionResult: T, props: PROPS) => TRANSFORMED_OUT;\nexport type ScopeActionDispatcher<T, PROPS, OUT> = (props?: PROPS, emitEvent?: boolean) => OUT;\n\nexport enum ScopeMacroType {\n  GETTER = 'GETTER',\n  SETTER = 'SETTER',\n  FUNCTION = 'FUNCTION',\n}\n\n/**\n * @interface Scope\n * @summary The whole state of your app is stored in an scopes inside a single store.\n */\nexport interface Scope<T = any> {\n\n  /**\n   * @var name.\n   * @summary Scope name.\n   * @description Name unique for scope.\n   */\n  readonly name: string;\n\n  /**\n   * @var state\n   * @summary Scope state.\n   */\n  readonly state: T;\n\n  /**\n   * @var context\n   * @summary Scope action current context.\n   */\n  readonly context: T;\n\n  /**\n   * @var isLocked\n   * @summary Is locked status.\n   */\n  readonly isLocked: boolean;\n\n  /**\n   * @var isActionDispatchAvailable\n   * @summary Is action dispatch available status.\n   */\n  readonly isActionDispatchAvailable: boolean;\n\n  /**\n   * @var isSubscribeMacroAutoCreateEnable\n   * @summary Is subscribe macro auto create enable.\n   */\n  readonly isSubscribeMacroAutoCreateEnable: boolean;\n\n  /**\n   * @var supportActions\n   * @summary Returns support actions.\n   */\n  readonly supportActions: string[];\n\n  /**\n   * @function registerAction\n   * @summary Registers a new action in scope.\n   * @param {string} actionName The action name.\n   * @param {ScopeAction} action The action that changes the state of scope.\n   * @param {ScopeActionResultTransformer} transformer The transformer change returned result.\n   * @return {ScopeActionDispatcher} Return action dispatcher.\n   * You can use it to dispatch action without call scope.dispatch.\n   * @throws {Error} Will throw an error if the scope locked or action name exists in scope\n   * when it is called.\n   */\n  registerAction<PROPS, TRANSFORMED_OUT = T>(\n    actionName: string,\n    action: ScopeAction<T, PROPS>,\n    transformer?: ScopeActionResultTransformer<T, PROPS, TRANSFORMED_OUT>\n  ): ScopeActionDispatcher<T, PROPS, TRANSFORMED_OUT>;\n\n  /**\n   * @function registerMacro\n   * @summary Registers a new macro in scope.\n   * @param {string} macroName The transformer name.\n   * @param {ScopeMacro} macro The transformer used to add getter macros to scope.\n   * @param {ScopeMacroType} macroType Register macro type.\n   * @throws {Error} Will throw an error if the scope locked or macro name exists in scope\n   * when it is called.\n   */\n  registerMacro<PROPS, OUT>(\n    macroName: string,\n    macro: ScopeMacro<T, PROPS, OUT>,\n    macroType?: ScopeMacroType\n  );\n\n  /**\n   * @function dispatch\n   * @summary Dispatches an action.\n   * @description Dispatches an action is the only way to trigger a scope change.\n   * @param {string} actionName Triggered action with same name.\n   * @description This action change state of scope and return new state.\n   * You can use resolve to change the state or reject to throw an exception.\n   * @param {any?} props Additional data for the correct operation of the action.\n   * @param {boolean?} emitEvent You can specify emit event or not.\n   * @return {any extends T} Return new state.\n   * @throws {Error} Will throw an error if the actionName not present in scope\n   * or {isActionDispatchAvailable} is false.\n   */\n  dispatch(actionName: string, props?, emitEvent?: boolean): T;\n\n  /**\n   * @function subscribe\n   * @summary Adds a scope change listener.\n   * @description It will be called any time an action is dispatched.\n   * @param {ScopeListener} listener A callback to be invoked on every dispatch.\n   * @param {string | string[]} actionName Specific action to subscribe.\n   * @return {ScopeListenerUnsubscribeCallback} A listener unsubscribe callback to remove this change listener later.\n   * @throws {Error} Will throw an error if actionName not present in scope.\n   */\n  subscribe(listener: ScopeListener<T>, actionName?: string | string[]): ScopeListenerUnsubscribeCallback;\n\n  /**\n   * @function unsubscribe\n   * @summary Removes a scope change listener.\n   * @param {string} id Id of the listener to delete.\n   * @return {boolean} Status of unsubscribe action.\n   */\n  unsubscribe(id: string): boolean;\n\n  /**\n   * @function synchronize\n   * @summary Adds a scope synchronized listener.\n   * @description Synchronized listener will be called any time an action is dispatched.\n   * @param {object} object Object to synchronized.\n   * @param {string} key Object property key for synchronized.\n   * If not specific use Object.getOwnPropertyNames to synchronize all properties.\n   * @param {string} actionName Specific action to synchronize.\n   * @return {ScopeListenerUnsubscribeCallback} A listener unsubscribe callback to remove this change listener later.\n   * @throws {Error} Will throw an errors:\n   * - if actionName not present in scope.\n   * - if {key} param not specified and state isn`t object.\n   */\n  synchronize(object: object, key: string, actionName?: string): ScopeListenerUnsubscribeCallback;\n\n  /**\n   * @function lock\n   * @summary Prevents the addition of new actions to scope.\n   */\n  lock(): void;\n\n}\n\n/**\n * @interface ScopeMiddleware\n * @summary You can use middleware to use aspect programing.\n */\nexport interface ScopeMiddleware<T> {\n\n  /**\n   * @function postSetup\n   * @param {Scope} scope Created scope.\n   * @summary You can use this method to setup custom actions in scope or\n   * subscribe to actions in scope. Lock scope in this point is bad practice.\n   */\n  postSetup(scope: Scope<T>): void;\n\n  /**\n   * @function appendActionMiddleware\n   * @summary This method wraps the action with a new action and returns it.\n   * @param {ScopeAction} action Wrapped action.\n   * @return {ScopeAction} Action that wrapped old action\n   */\n  appendActionMiddleware<PROPS>(action: ScopeAction<T, PROPS>): ScopeAction<T, PROPS>;\n\n}\n\nexport enum ScopeChangeEventType {\n  REGISTER_MACRO = 'REGISTER_MACRO',\n  REGISTER_ACTION = 'REGISTER_ACTION',\n  LOCK = 'LOCK'\n}\n\nexport interface ScopeChangeDetails {\n  type: ScopeChangeEventType;\n  actionName?: string;\n  macroName?: string;\n  macroType?: ScopeMacroType;\n}\n\n/**\n * @interface StoreDevTool\n * @summary You can use StoreDevTool to handle all action in store.\n */\nexport interface StoreDevTool {\n\n  /**\n   * @function onCreate\n   * @summary Call when created new scope.\n   * @param {Scope} scope Created scope.\n   */\n  onCreate(scope: Scope): void;\n\n  /**\n   * @function onChange\n   * @summary Call when change scope (lock, registerAction, dispatch).\n   * @param {Scope} scope Changed scope.\n   * @param {ScopeChangeDetails} details Additional scope change details.\n   */\n  onChange(scope: Scope, details: ScopeChangeDetails): void;\n\n  /**\n   * @function onAction\n   * @summary Call when in any scope dispatch action.\n   * @param {ScopeEvent} event Action event.\n   */\n  onAction(event: ScopeEvent): void;\n\n  /**\n   * @function onActionError\n   * @summary Call when in any scope dispatch action error.\n   * @param {ScopeError} error Action error.\n   */\n  onActionError(error: ScopeError): void;\n\n  /**\n   * @function onActionListenerError\n   * @summary Call when in any scope listener dispatch error.\n   * @param {ScopeError} error ActionListener error.\n   */\n  onActionListenerError(error: ScopeError): void;\n\n}\n\nconst generateScopeName = createUniqueIdGenerator('Scope');\nconst generateScopeListenerId = createUniqueIdGenerator('ScopeListener');\n\nlet storeDevTool: StoreDevTool = {\n  onCreate: () => null,\n  onChange: () => null,\n  onAction: () => null,\n  onActionError: () => null,\n  onActionListenerError: () => null\n};\n\nclass ScopeImpl<T> implements Scope<T> {\n\n  protected readonly _name: string;\n  protected _state: T;\n  protected _context: T;\n  protected _isFrozen: boolean;\n  protected _isActionInProgress: boolean = false;\n  protected _isActionDispatchAvailable: boolean = true;\n  protected _isSubscribeMacroAutoCreateEnable: boolean;\n  protected _middleware: ScopeMiddleware<T>[];\n  protected _actions: { [key: string]: ScopeAction<T, any> } = {};\n  protected _listeners: { [key: string]: ScopeListener<T> } = {};\n  protected _contextEvents: ScopeEvent<T>[];\n\n  constructor(config: ScopeConfig<T>) {\n    const {name, initState, middleware, isSubscribeMacroAutoCreateEnable, isFrozen} = config;\n    this._name = name;\n    this._state = initState;\n    // This code needed to save middleware correct order in dispatch method.\n    this._middleware = [...middleware].reverse();\n    this._isSubscribeMacroAutoCreateEnable = isSubscribeMacroAutoCreateEnable;\n    this._isFrozen = isFrozen;\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  get isLocked() {\n    return this._isFrozen;\n  }\n\n  get isActionDispatchAvailable() {\n    return this._isActionDispatchAvailable;\n  }\n\n  get isSubscribeMacroAutoCreateEnable() {\n    return this._isSubscribeMacroAutoCreateEnable;\n  }\n\n  get state() {\n    return this._state;\n  }\n\n  get context() {\n    return this._context;\n  }\n\n  get supportActions() {\n    return Object.getOwnPropertyNames(this._actions);\n  }\n\n  registerAction<PROPS, TRANSFORMED_OUT = T>(\n    actionName: string,\n    action: ScopeAction<T, PROPS>,\n    transformer: ScopeActionResultTransformer<T, PROPS, TRANSFORMED_OUT>\n      = actionResult => <TRANSFORMED_OUT>(actionResult as any)\n  ) {\n    if (!transformer) {\n      throw new Error(`Transformer cannot be null or undefined.`);\n    }\n    if (this._isFrozen) {\n      throw new Error(`This scope is locked you can't add new action.`);\n    }\n    if (actionName in this._actions || (this._isSubscribeMacroAutoCreateEnable && actionName in this)) {\n      throw new Error(`Action name ${actionName} is duplicate or reserved in scope ${this._name}.`);\n    }\n    this._actions[actionName] = action;\n\n    const actionDispatcher = (props?: PROPS, emitEvent?: boolean) => {\n      return transformer(this.dispatch(actionName, props, emitEvent), props);\n    };\n\n    if (this._isSubscribeMacroAutoCreateEnable) {\n      const capitalizeFirstLetterActionName = () => {\n        return actionName.charAt(0).toUpperCase() + actionName.slice(1);\n      };\n\n      const subscriberMacroName = `on${capitalizeFirstLetterActionName()}`;\n\n      this.registerMacro(subscriberMacroName, (state, listener: ScopeListener<T>) => {\n        return this.subscribe(listener, actionName);\n      });\n    }\n\n    this[actionName] = actionDispatcher;\n\n    storeDevTool.onChange(this, {type: ScopeChangeEventType.REGISTER_ACTION, actionName});\n\n    return actionDispatcher;\n  }\n\n  registerMacro<IN, OUT>(\n    macroName: string,\n    macro: ScopeMacro<T, IN, OUT>,\n    macroType: ScopeMacroType = ScopeMacroType.FUNCTION\n  ) {\n    if (!macro) {\n      throw new Error(`Macro cannot be null or undefined.`);\n    }\n    if (this._isFrozen) {\n      throw new Error(`This scope is locked you can't add new macro.`);\n    }\n    const isMacroExist = macroName in this;\n    const isPresentMacroHasFunctionType = () => typeof this[macroName] === 'function';\n\n    if (isMacroExist\n      && (isPresentMacroHasFunctionType()\n        || macroType === ScopeMacroType.FUNCTION\n        || (macroType === ScopeMacroType.GETTER && Object.getOwnPropertyDescriptor(this, macroName).get)\n        || (macroType === ScopeMacroType.SETTER && Object.getOwnPropertyDescriptor(this, macroName).set))) {\n      throw new Error(`Macro name ${macroName} is reserved in scope ${this._name}.`);\n    }\n    const macroFunc = (props?: IN) => {\n      return macro(this._state, props);\n    };\n    switch (macroType) {\n      case ScopeMacroType.FUNCTION:\n        this[macroName] = macroFunc;\n        break;\n      case ScopeMacroType.GETTER:\n        Object.defineProperty(this, macroName, {get: macroFunc, configurable: true, enumerable: true});\n        break;\n      case ScopeMacroType.SETTER:\n        Object.defineProperty(this, macroName, {set: macroFunc, configurable: true, enumerable: true});\n        break;\n    }\n\n    storeDevTool.onChange(this, {type: ScopeChangeEventType.REGISTER_MACRO, macroName, macroType});\n  }\n\n  dispatch(actionName: string, props?, emitEvent = true) {\n    let action: ScopeAction<T, any> = this._actions[actionName];\n\n    if (!action) {\n      throw new Error(`This action not exists ${actionName}`);\n    }\n\n    if (!this._isActionDispatchAvailable) {\n      throw new Error(`Now action dispatch not available. Other action spreads.`);\n    }\n\n    if (props && typeof props === 'object') {\n      deepFreeze(props);\n    }\n\n    this._middleware.forEach(\n      middleware => action = middleware.appendActionMiddleware(action)\n    );\n\n    const oldState = this._isActionInProgress ? this._context : this._state;\n\n    const buildScopeError = (reason) => ({\n      reason,\n      oldState,\n      scopeName: this._name,\n      actionName,\n      props\n    }) as ScopeError<T>;\n\n    const onFulfilled = newState => {\n      deepFreeze(newState);\n      const event: ScopeEvent<T> = {\n        oldState,\n        newState,\n        scopeName: this._name,\n        actionName,\n        props\n      };\n\n      if (this._isActionInProgress) {\n        if (emitEvent) {\n          this._contextEvents\n            ? this._contextEvents.push(event)\n            : this._contextEvents = [event];\n        }\n        this._context = newState;\n        return newState;\n      }\n\n      this._context = null;\n      this._state = newState;\n\n      if (this._contextEvents) {\n        event.childrenEvents = this._contextEvents\n          .map(contextEvent => ({...contextEvent, parentEvent: event}));\n      }\n\n      this._contextEvents = null;\n      this._isActionDispatchAvailable = false;\n\n      const dispatchEvent = (event: ScopeEvent<T>) => {\n        storeDevTool.onAction(event);\n        Object.getOwnPropertyNames(this._listeners).forEach(key => {\n          const listener = this._listeners[key];\n          try {\n            if (listener) listener(event);\n          } catch (reason) {\n            storeDevTool.onActionListenerError(buildScopeError(reason));\n          }\n        });\n      };\n\n      if (emitEvent) {\n        if (event.childrenEvents) {\n          event.childrenEvents.forEach(dispatchEvent);\n        }\n        dispatchEvent(event);\n      }\n\n      this._isActionDispatchAvailable = true;\n\n      return newState;\n    };\n\n    const onRejected = reason => {\n      const error = buildScopeError(reason);\n      if (!this._isActionInProgress) {\n        storeDevTool.onActionError(error);\n      }\n      return error;\n    };\n\n    if (this._isActionInProgress) {\n      try {\n        return onFulfilled(action(oldState, props));\n      } catch (e) {\n        throw onRejected(e);\n      }\n    }\n\n    try {\n      this._isActionInProgress = true;\n      this._context = oldState;\n      const actionResult = action(oldState, props);\n      this._isActionInProgress = false;\n      return onFulfilled(actionResult);\n    } catch (e) {\n      this._isActionInProgress = false;\n      throw onRejected(e);\n    }\n  }\n\n  subscribe(listener: ScopeListener<T>, actionName?: string | string[]): ScopeListenerUnsubscribeCallback {\n    const actionNames: string[] = [];\n\n    if (Array.isArray(actionName)) {\n      actionNames.push(...actionName);\n    } else if (actionName) {\n      actionNames.push(actionName);\n    }\n\n    actionNames.forEach(actionName => {\n      if (!(actionName in this._actions)) {\n        throw new Error(`Action (${actionName}) not present in scope.`);\n      }\n    });\n\n    const listenerId = generateScopeListenerId();\n    this._listeners[listenerId] = event => {\n\n      if (actionNames.length === 0) {\n        return listener(event);\n      }\n\n      const isActionPresentInScope = actionNames.findIndex(\n        actionName => actionName === event.actionName\n      ) !== -1;\n\n      if (isActionPresentInScope) {\n        listener(event);\n      }\n    };\n\n    return Object.assign(() => this.unsubscribe(listenerId), {listenerId});\n  }\n\n  synchronize(object: object, key?: string, actionName?: string) {\n    const state = this.state;\n\n    let listener: (newState: T) => void = null;\n\n    if (key) {\n      listener = (newState) => {\n        object[key] = newState;\n      };\n    }\n\n    if (!key && typeof state === \"object\") {\n      listener = (newState) => {\n        Object.getOwnPropertyNames(newState).forEach(\n          key => object[key] = newState[key]\n        );\n      };\n    }\n\n    if (!listener) {\n      throw new Error('If specific key not set, state must be object.');\n    }\n\n    listener(this.state);\n\n    return this.subscribe(({newState}) => listener(newState), actionName);\n  }\n\n  unsubscribe(id: string) {\n    return delete this._listeners[id];\n  }\n\n  lock() {\n    this._isFrozen = true;\n    storeDevTool.onChange(this, {type: ScopeChangeEventType.LOCK});\n  }\n\n}\n\nclass ComposeScopeImpl<T extends {}> extends ScopeImpl<T> {\n\n  private readonly _scopes: Scope[];\n\n  constructor(\n    scopes: Scope[],\n    config: ScopeConfig<T>\n  ) {\n    super(config);\n\n    this._scopes = scopes;\n\n    let actionNames: string[] = [];\n\n    scopes.forEach(scope => {\n      actionNames = [...actionNames, ...scope.supportActions];\n\n      scope.lock();\n      scope.subscribe(({actionName, props, oldState}) => {\n        const currentState = this.state as {};\n        Object.getOwnPropertyNames(this._listeners)\n          .forEach(key => this._listeners[key]({\n            oldState: {...currentState, [scope.name]: oldState} as T,\n            newState: currentState as T,\n            scopeName: scope.name,\n            actionName,\n            props\n          }));\n      });\n    });\n\n    actionNames = actionNames.filter(\n      (actionName, i, self) => self.indexOf(actionName) === i\n    );\n\n    actionNames.forEach(actionName => this.registerAction(\n      actionName, (state, props?) => {\n        scopes.filter(\n          scope => scope.supportActions.findIndex(\n            it => it === actionName\n          ) >= 0\n        ).map(scope => scope.dispatch(actionName, props));\n        return this.state;\n      }\n    ));\n\n    this.lock();\n  }\n\n  get state(): T {\n    let state = {};\n\n    this._scopes.forEach(scope => state[scope.name] = scope.state);\n\n    return state as T;\n  }\n\n}\n\nconst scopes: { [key: string]: Scope<any> } = {};\n\n/**\n * @function createScope\n * @summary Create a new scope and return it.\n * @param {ScopeConfig} config The config of scope.\n * @return {Scope} Scope.\n * @throws {Error} Will throw an error if name of scope not unique.\n */\nexport function createScope<T>(config: ScopeConfig<T> = {}): Scope<T> {\n  const {\n    name = generateScopeName(),\n    initState = null,\n    middleware = [],\n    isSubscribeMacroAutoCreateEnable = false,\n    isFrozen = false\n  } = config;\n  if (name in scopes) {\n    throw new Error(`Scope name must unique`);\n  }\n  let scope = new ScopeImpl<T>({name, initState, middleware: middleware as ScopeMiddleware<T>[], isSubscribeMacroAutoCreateEnable, isFrozen});\n  scopes[name] = scope;\n  middleware.forEach(middleware => middleware.postSetup(scope));\n  storeDevTool.onCreate(scope);\n  return scope;\n}\n\n/**\n * @function composeScope\n * @summary Compose a new scope and return it.\n * @description Compose a new scope and return it. All scopes is auto lock.\n * @return {Scope} Compose scope.\n * @throws {Error} Will throw an error if scopes length less fewer than two.\n * @throws {Error} Will throw an error if name of scope not unique.\n */\nexport function composeScope<T = {}>(\n  scopes: (Scope | string)[],\n  config: ScopeConfig<T> = {},\n): Scope<T> {\n  const {name = generateScopeName(), middleware = [], isSubscribeMacroAutoCreateEnable = false} = config;\n  if (name in scopes) {\n    throw new Error(`Scope name must unique`);\n  }\n  let composeScopes = scopes.map(\n    scope => typeof scope === \"string\" ? getScope(scope) : scope\n  ).filter(\n    (scope, i, self) => scope && self.indexOf(scope) === i\n  );\n  const MIN_COMPOSE_SCOPE_COUNT = 2;\n  if (composeScopes.length < MIN_COMPOSE_SCOPE_COUNT) {\n    throw new Error(`Compose scopes length must be greater than one`);\n  }\n  const scope = new ComposeScopeImpl<T>(composeScopes, {name, middleware, isSubscribeMacroAutoCreateEnable, initState: null, isFrozen: false});\n  scopes[name] = scope;\n  middleware.forEach(middleware => middleware.postSetup(scope));\n  storeDevTool.onCreate(scope);\n  return scope;\n}\n\n/**\n * @function getScope\n * @summary Returns scope.\n * @param {string} scopeName Name scope, to get the Scope.\n * @return {Scope} Scope\n * @throws {Error} Will throw an error if scope not present.\n */\nexport function getScope(scopeName: string) {\n  if (!scopes[scopeName]) {\n    throw new Error(`Scope with name ${scopeName} not present`);\n  }\n  return scopes[scopeName];\n}\n\n/**\n * @function getState\n * @summary Returns all scope states.\n * @return {{string: any}} Scope states\n */\nexport function getState() {\n  const state = {};\n  Object.getOwnPropertyNames(scopes).forEach(key => {\n    state[key] = scopes[key].state;\n  });\n  return state;\n}\n\n/**\n * @function setStoreDevTool\n * @summary Set store dev tool.\n * @param {StoreDevTool} devTool Dev tool middleware, to handle store changes.\n */\nexport function setStoreDevTool(devTool: Partial<StoreDevTool>) {\n  Object.assign(storeDevTool, devTool);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)(\"object\"==typeof exports?exports:e)[n]=r[n]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=2)}({2:function(e,t,r){\"use strict\";function n(e){return Object.getOwnPropertyNames(e).forEach(function(t){var r=e[t];\"object\"==typeof r&&null!==r&&n(r)}),Object.freeze(e)}function o(e){function t(e,n){if(Object(e)!==e)r[n]=e;else if(Array.isArray(e))if(0===e.length)r[n]=[];else for(var o=0;o<e.length;o++)t(e[o],n?n+\".\"+o:\"\"+o);else{var f=Object.getOwnPropertyNames(e);0!==f.length?f.forEach(function(r){return t(e[r],n?n+\".\"+r:r)}):r[n]={}}}var r={};return t(e,\"\"),r}function f(e){if(Object(e)!==e||Array.isArray(e))return e;var t,r,n,o,f={};return Object.getOwnPropertyNames(e).forEach(function(u){t=f,r=\"\",n=u.split(\".\");for(var i=0;i<n.length;i++)o=!isNaN(parseInt(n[i],10)),t=t[r]||(t[r]=o?[]:{}),r=n[i];t[r]=e[u]}),f[\"\"]}function u(e){return void 0===e||null===e?\"\":\"number\"==typeof e?\"\"+e:\"object\"==typeof e?JSON.stringify(e):e}Object.defineProperty(t,\"__esModule\",{value:!0}),t.deepFreeze=n,t.flatten=o,t.unflatten=f,t.stringifyValue=u}})});\n//# sourceMappingURL=object.min.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@sardonyxwt/utils/object/object.min.js\n// module id = 1\n// module chunks = 0","!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=1)}([,function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.generateSalt=function(e,t){void 0===e&&(e=16),void 0===t&&(t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\");for(var n=\"\";n.length<e;)n+=t.charAt(Math.floor(Math.random()*t.length));return n},t.generateUUID=function(){return t.generateSalt(4)+\"-\"+t.generateSalt(4)+\"-\"+t.generateSalt(4)+\"-\"+t.generateSalt(4)},t.createUniqueIdGenerator=function(e){var n=0,r=t.generateUUID(),o=e+\":\"+r;return function(){return o+\":\"+ ++n}}}])});\n//# sourceMappingURL=generator.min.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@sardonyxwt/utils/generator/generator.min.js\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}