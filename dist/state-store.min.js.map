{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///dist/state-store.min.js","webpack:///webpack/bootstrap 617ed87a325b97f46cdf","webpack:///./src/index.ts","webpack:///./node_modules/@sardonyxwt/utils/object/object.min.js","webpack:///./node_modules/@sardonyxwt/utils/generator/generator.min.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","createScope","initState","generator_1","uniqueId","scopes","Error","scope","ScopeImpl","getScope","scopeName","getState","state","getOwnPropertyNames","forEach","key","value","object_1","isFrozen","actions","listeners","registerAction","action","dispatch","actionName","props","_this","oldState","Promise","resolve","reject","then","newState","deepFreeze","subscribe","listener","listenerId","event","synchronize","_a","unsubscribe","id","lock","isLocked","ROOT_SCOPE","e","t","r","default","3","freeze","length","push","charAt","Math","floor","random","u","join","generateSeed"],"mappings":"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","file":"./dist/state-store.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"store\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"store\"] = factory();\n\telse\n\t\troot[\"store\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"store\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"store\"] = factory();\n\telse\n\t\troot[\"store\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar object_1 = __webpack_require__(1);\r\nvar generator_1 = __webpack_require__(2);\r\nvar ScopeImpl = /** @class */ (function () {\r\n    function ScopeImpl(name, state) {\r\n        this.name = name;\r\n        this.state = state;\r\n        this.isFrozen = false;\r\n        this.actions = {};\r\n        this.listeners = {};\r\n    }\r\n    ScopeImpl.prototype.registerAction = function (name, action) {\r\n        if (this.isFrozen) {\r\n            throw new Error(\"This scope is locked you can't add new action.\");\r\n        }\r\n        if (name in this.actions) {\r\n            throw new Error(\"Action name is duplicate in scope \" + this.name);\r\n        }\r\n        this.actions[name] = action;\r\n    };\r\n    ScopeImpl.prototype.dispatch = function (actionName, props) {\r\n        var _this = this;\r\n        var action = this.actions[actionName];\r\n        if (!action) {\r\n            throw new Error(\"This action not exists \" + actionName);\r\n        }\r\n        var oldState = this.state;\r\n        return new Promise(function (resolve, reject) {\r\n            action(oldState, props, resolve, reject);\r\n        }).then(function (newState) {\r\n            object_1.deepFreeze(newState);\r\n            Object.getOwnPropertyNames(_this.listeners).forEach(function (key) { return _this.listeners[key]({ oldState: oldState, newState: newState, actionName: actionName }); });\r\n            _this.state = newState;\r\n            return newState;\r\n        });\r\n    };\r\n    ScopeImpl.prototype.subscribe = function (listener, actionName) {\r\n        if (actionName && !(actionName in this.actions)) {\r\n            throw new Error(\"Action (\" + actionName + \") not present in scope.\");\r\n        }\r\n        var listenerId = generator_1.uniqueId('listener');\r\n        this.listeners[listenerId] = function (event) {\r\n            if (!actionName || actionName === event.actionName) {\r\n                listener(event);\r\n            }\r\n        };\r\n        return listenerId;\r\n    };\r\n    ScopeImpl.prototype.synchronize = function (object, key, actionName) {\r\n        object[key] = this.getState();\r\n        return this.subscribe(function (_a) {\r\n            var newState = _a.newState;\r\n            object[key] = newState;\r\n        }, actionName);\r\n    };\r\n    ScopeImpl.prototype.unsubscribe = function (id) {\r\n        return delete this.listeners[id];\r\n    };\r\n    ScopeImpl.prototype.lock = function () {\r\n        this.isFrozen = true;\r\n    };\r\n    ScopeImpl.prototype.isLocked = function () {\r\n        return this.isFrozen;\r\n    };\r\n    ScopeImpl.prototype.getState = function () {\r\n        return this.state;\r\n    };\r\n    return ScopeImpl;\r\n}());\r\nvar scopes = {};\r\n/**\r\n * Create a new scope and return it.\r\n * @param {string} name The name of scope\r\n * By default generate unique name\r\n * @param {any} initState The initial scope state.\r\n * By default use empty object.\r\n * @return {Scope} Scope.\r\n * @throws {Error} Will throw an error if name of scope not unique.\r\n */\r\nfunction createScope(name, initState) {\r\n    if (name === void 0) { name = generator_1.uniqueId('scope'); }\r\n    if (initState === void 0) { initState = null; }\r\n    if (name in scopes) {\r\n        throw new Error(\"Scope name must unique\");\r\n    }\r\n    var scope = new ScopeImpl(name, initState);\r\n    scopes[name] = scope;\r\n    return scope;\r\n}\r\nexports.createScope = createScope;\r\n/**\r\n * Returns scope.\r\n * @param {string} scopeName Name scope, to get the Scope.\r\n * @return {Scope} Scope\r\n */\r\nfunction getScope(scopeName) {\r\n    return scopes[scopeName];\r\n}\r\nexports.getScope = getScope;\r\n/**\r\n * Returns all scope states.\r\n * @return {{string: any}} Scope states\r\n */\r\nfunction getState() {\r\n    var state = {};\r\n    Object.getOwnPropertyNames(scopes).forEach(function (key) {\r\n        state[key] = scopes[key].getState();\r\n    });\r\n    return state;\r\n}\r\nexports.getState = getState;\r\n/**\r\n * This scope is global\r\n * @type {Scope}\r\n */\r\nexports.ROOT_SCOPE = createScope('rootScope', {});\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(e,t){if(true)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=3)}({3:function(e,t,n){\"use strict\";function r(e){return Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];\"object\"==typeof n&&null!==n&&r(n)}),Object.freeze(e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.deepFreeze=r}})});\n//# sourceMappingURL=object.min.js.map\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n!function(e,t){if(true)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=1)}([,function(e,t,n){\"use strict\";function r(e){for(var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",n=[];n.length<e;)n.push(t.charAt(Math.floor(Math.random()*t.length)));return n}function o(e,t){void 0===e&&(e=\"\"),void 0===t&&(t=!1),u[e]?++u[e]:u[e]=0;var n=e+u[e];return t&&(n=n+\"-\"+r(8).join(\"\")),n}Object.defineProperty(t,\"__esModule\",{value:!0});var u={};t.generateSeed=r,t.uniqueId=o}])});\n//# sourceMappingURL=generator.min.js.map\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// dist/state-store.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 617ed87a325b97f46cdf","import {deepFreeze} from '@sardonyxwt/utils/object';\nimport {uniqueId} from '@sardonyxwt/utils/generator';\n\nexport type Listener<T> = (event: { newState: T, oldState: T, actionName: string }) => void;\nexport type Action<T> = (state: T, props, resolve: (newState: T) => void, reject: (error) => void) => void;\n\nexport interface Scope<T = any> {\n\n  /**\n   * @var Scope name\n   */\n  readonly name: string;\n\n  /**\n   * Registers a new action in scope.\n   * @param {string} name The action name.\n   * @param {Action} action The action that changes the state of scope\n   * @throws {Error} Will throw an error if the scope locked or action name exists in scope\n   * when it is called.\n   */\n  registerAction(name: string, action: Action<T>): void;\n\n  /**\n   * Dispatches an action. It is the only way to trigger a scope change.\n   * @param {string} actionName Triggered action with same name.\n   * This action change state of scope and return new state.\n   * You can use resolve to change the state or reject to throw an exception.\n   * @param {any?} props Additional data for the correct operation of the action.\n   * @return {Promise<>} You can use the promise to get a new state of scope\n   * or catch errors.\n   * @throws {Error} Will throw an error if the actionName not present in scope.\n   */\n  dispatch(actionName: string, props?): Promise<T>;\n\n  /**\n   * Adds a scope change listener.\n   * It will be called any time an action is dispatched.\n   * @param {Listener} listener A callback to be invoked on every dispatch.\n   * @param {string} actionName Specific action to subscribe.\n   * @return {string} A listener id to remove this change listener later.\n   * @throws {Error} Will throw an error if actionName not present in scope.\n   */\n  subscribe(listener: Listener<T>, actionName?: string): string;\n\n  /**\n   * Removes a scope change listener.\n   * @param {string} id Id of the listener to delete.\n   */\n  unsubscribe(id: string): boolean;\n\n  /**\n   * Adds a scope synchronized listener.\n   * It will be called any time an action is dispatched.\n   * @param {object} object Object to synchronized.\n   * @param {string} key Object property key for synchronized.\n   * @param {string} actionName Specific action to synchronize.\n   * @return {string} A listener id to remove this change listener later.\n   * @throws {Error} Will throw an error if actionName not present in scope.\n   */\n  synchronize(object: object, key: string, actionName?: string): string;\n\n  /**\n   * Prevents the addition of new actions to scope.\n   */\n  lock(): void;\n\n  /**\n   * Check is locked status.\n   * @return Is locked status.\n   */\n  isLocked(): boolean;\n\n  /**\n   * Returns scope state.\n   * @return Scope state.\n   */\n  getState(): T;\n\n}\n\nclass ScopeImpl<T = any> implements Scope<T> {\n\n  private isFrozen = false;\n  private actions: { [key: string]: Action<T> } = {};\n  private listeners: { [key: string]: Listener<T> } = {};\n\n  constructor(readonly name: string, private state: T) {\n  }\n\n  registerAction(name: string, action: Action<T>) {\n    if (this.isFrozen) {\n      throw new Error(`This scope is locked you can't add new action.`);\n    }\n    if (name in this.actions) {\n      throw new Error(`Action name is duplicate in scope ${this.name}`);\n    }\n    this.actions[name] = action;\n  }\n\n  dispatch(actionName: string, props?) {\n    const action: Action<T> = this.actions[actionName];\n    if (!action) {\n      throw new Error(`This action not exists ${actionName}`);\n    }\n    const oldState = this.state;\n    return new Promise<T>((resolve, reject) => {\n      action(oldState, props, resolve, reject);\n    }).then(newState => {\n      deepFreeze(newState);\n      Object.getOwnPropertyNames(this.listeners).forEach(\n        key => this.listeners[key]({oldState, newState, actionName})\n      );\n      this.state = newState;\n      return newState;\n    });\n  }\n\n  subscribe(listener: Listener<T>, actionName?: string) {\n    if (actionName && !(actionName in this.actions)) {\n      throw new Error(`Action (${actionName}) not present in scope.`);\n    }\n    const listenerId = uniqueId('listener');\n    this.listeners[listenerId] = event => {\n      if (!actionName || actionName === event.actionName) {\n        listener(event);\n      }\n    };\n    return listenerId;\n  }\n\n  synchronize(object: object, key: string, actionName?: string) {\n    object[key] = this.getState();\n    return this.subscribe(({newState}) => {\n      object[key] = newState;\n    }, actionName);\n  }\n\n  unsubscribe(id: string) {\n    return delete this.listeners[id];\n  }\n\n  lock() {\n    this.isFrozen = true;\n  }\n\n  isLocked() {\n    return this.isFrozen;\n  }\n\n  getState() {\n    return this.state;\n  }\n\n}\n\nconst scopes: { [key: string]: Scope<any> } = {};\n\n/**\n * Create a new scope and return it.\n * @param {string} name The name of scope\n * By default generate unique name\n * @param {any} initState The initial scope state.\n * By default use empty object.\n * @return {Scope} Scope.\n * @throws {Error} Will throw an error if name of scope not unique.\n */\nexport function createScope<T>(name = uniqueId('scope'), initState: T = null): Scope<T> {\n  if (name in scopes) {\n    throw new Error(`Scope name must unique`);\n  }\n  const scope = new ScopeImpl<T>(name, initState);\n  scopes[name] = scope;\n  return scope;\n}\n\n/**\n * Returns scope.\n * @param {string} scopeName Name scope, to get the Scope.\n * @return {Scope} Scope\n */\nexport function getScope(scopeName) {\n  return scopes[scopeName];\n}\n\n/**\n * Returns all scope states.\n * @return {{string: any}} Scope states\n */\nexport function getState() {\n  const state = {};\n  Object.getOwnPropertyNames(scopes).forEach(key => {\n    state[key] = scopes[key].getState();\n  });\n  return state;\n}\n\n/**\n * This scope is global\n * @type {Scope}\n */\nexport const ROOT_SCOPE = createScope('rootScope', {});\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=3)}({3:function(e,t,n){\"use strict\";function r(e){return Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];\"object\"==typeof n&&null!==n&&r(n)}),Object.freeze(e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.deepFreeze=r}})});\n//# sourceMappingURL=object.min.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@sardonyxwt/utils/object/object.min.js\n// module id = 1\n// module chunks = 0","!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=1)}([,function(e,t,n){\"use strict\";function r(e){for(var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",n=[];n.length<e;)n.push(t.charAt(Math.floor(Math.random()*t.length)));return n}function o(e,t){void 0===e&&(e=\"\"),void 0===t&&(t=!1),u[e]?++u[e]:u[e]=0;var n=e+u[e];return t&&(n=n+\"-\"+r(8).join(\"\")),n}Object.defineProperty(t,\"__esModule\",{value:!0});var u={};t.generateSeed=r,t.uniqueId=o}])});\n//# sourceMappingURL=generator.min.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@sardonyxwt/utils/generator/generator.min.js\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}