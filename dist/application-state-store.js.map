{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///dist/application-state-store.js","webpack:///webpack/bootstrap aa690e3a52a684baf580","webpack:///./src/index.ts","webpack:///./src/utils.ts"],"names":["root","factory","exports","module","define","amd","a","i","self","this","modules","__webpack_require__","moduleId","installedModules","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","value","utils_1","Store","scope","scopeId","initScope","scopes","Error","action","actionId","generateId","actions","func","dispatch","props","_this","scopeId_1","oldScope_1","newScope","listenerIndex","listeners","listener","oldScope","subscribe","newListener","listenerId","unsubscribe","getState","ROOT_SCOPE","indexes"],"mappings":"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","file":"./dist/application-state-store.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar utils_1 = __webpack_require__(1);\r\nvar Store = /** @class */ (function () {\r\n    function Store() {\r\n    }\r\n    Store.scope = function (scopeId, initScope) {\r\n        if (initScope === void 0) { initScope = {}; }\r\n        if (scopeId in this.scopes) {\r\n            throw new Error(\"This scope already exists \" + scopeId);\r\n        }\r\n        this.scopes[scopeId] = initScope;\r\n        return scopeId;\r\n    };\r\n    Store.action = function (scopeId, action) {\r\n        if (scopeId in Store.scopes) {\r\n            var actionId = utils_1.generateId('store_action');\r\n            Store.actions[actionId] = { scopeId: scopeId, func: action };\r\n            return actionId;\r\n        }\r\n        else\r\n            throw new Error(\"This scope not exists \" + scopeId);\r\n    };\r\n    Store.dispatch = function (actionId, props) {\r\n        var _this = this;\r\n        if (actionId in this.actions) {\r\n            var action = this.actions[actionId];\r\n            var scopeId_1 = action.scopeId;\r\n            var oldScope_1 = this.scopes[scopeId_1];\r\n            action.func(oldScope_1, props, function (newScope) {\r\n                _this.scopes[scopeId_1] = newScope;\r\n                for (var listenerIndex in _this.listeners) {\r\n                    var listener = _this.listeners[listenerIndex];\r\n                    if (listener.actionId === actionId) {\r\n                        listener.func({ newScope: newScope, oldScope: oldScope_1 });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else\r\n            throw new Error(\"This action not exists \" + actionId);\r\n    };\r\n    Store.subscribe = function (actionId, listener) {\r\n        if (actionId in this.actions) {\r\n            var newListener = { actionId: actionId, func: listener };\r\n            var listenerId = utils_1.generateId('store_listener');\r\n            this.listeners[listenerId] = newListener;\r\n            return listenerId;\r\n        }\r\n        else\r\n            throw new Error(\"This action not exists \" + actionId);\r\n    };\r\n    Store.unsubscribe = function (listenerId) {\r\n        delete this.listeners[listenerId];\r\n    };\r\n    Store.getState = function () {\r\n        return this.scopes;\r\n    };\r\n    Store.scopes = {};\r\n    Store.actions = {};\r\n    Store.listeners = {};\r\n    return Store;\r\n}());\r\nexports.Store = Store;\r\nexports.ROOT_SCOPE = Store.scope('rootScope');\r\nexports.default = Store;\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar indexes = {};\r\nfunction generateId(name) {\r\n    if (name === void 0) { name = 'default'; }\r\n    indexes[name] ? ++indexes[name] : indexes[name] = 0;\r\n    return name + \"_\" + indexes[name];\r\n}\r\nexports.generateId = generateId;\r\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// dist/application-state-store.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap aa690e3a52a684baf580","import { generateId } from './utils';\r\n\r\nexport type ListenerType = (event: { newScope: any, oldScope: any }) => void;\r\nexport type ActionType = (\r\n  scope: any,\r\n  props: any,\r\n  resolved: (newScope: any) => void\r\n) => void;\r\nexport type Action = { scopeId: string, func: ActionType };\r\nexport type Listener = { actionId: string, func: ListenerType };\r\n\r\nexport class Store {\r\n\r\n  private static scopes: { [id: string]: any } = {};\r\n  private static actions: { [id: string]: Action } = {};\r\n  private static listeners: { [id: string]: Listener } = {};\r\n\r\n  static scope(scopeId: string, initScope: any = {}): string {\r\n    if (scopeId in this.scopes) {\r\n      throw new Error(`This scope already exists ${scopeId}`);\r\n    }\r\n    this.scopes[scopeId] = initScope;\r\n    return scopeId;\r\n  }\r\n\r\n  static action(scopeId: string, action: ActionType): string {\r\n    if (scopeId in Store.scopes) {\r\n      const actionId = generateId('store_action');\r\n      Store.actions[actionId] = { scopeId, func: action };\r\n      return actionId;\r\n    } else throw new Error(`This scope not exists ${scopeId}`);\r\n  }\r\n\r\n  static dispatch(actionId: string, props: any) {\r\n    if (actionId in this.actions) {\r\n      const action = this.actions[actionId];\r\n      const scopeId = action.scopeId;\r\n      const oldScope = this.scopes[scopeId];\r\n\r\n      action.func(oldScope, props, (newScope) => {\r\n        this.scopes[scopeId] = newScope;\r\n        for (let listenerIndex in this.listeners) {\r\n          let listener = this.listeners[listenerIndex];\r\n          if (listener.actionId === actionId) {\r\n            listener.func({ newScope, oldScope });\r\n          }\r\n        }\r\n      });\r\n    } else throw new Error(`This action not exists ${actionId}`);\r\n  }\r\n\r\n  static subscribe(actionId: string, listener: ListenerType): string {\r\n    if (actionId in this.actions) {\r\n      const newListener = { actionId, func: listener };\r\n      const listenerId = generateId('store_listener');\r\n      this.listeners[listenerId] = newListener;\r\n      return listenerId;\r\n    } else throw new Error(`This action not exists ${actionId}`);\r\n  }\r\n\r\n  static unsubscribe(listenerId: string) {\r\n    delete this.listeners[listenerId];\r\n  }\r\n\r\n  static getState(): any {\r\n    return this.scopes;\r\n  }\r\n\r\n}\r\n\r\nexport const ROOT_SCOPE = Store.scope('rootScope');\r\n\r\nexport default Store;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","let indexes: { [key: string]: number } = {};\r\n\r\nexport function generateId(name: string = 'default') {\r\n  indexes[name]? ++indexes[name] : indexes[name] = 0;\r\n  return `${name}_${indexes[name]}`;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.ts"],"sourceRoot":""}